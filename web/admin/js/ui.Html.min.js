ui={},window.ui=ui,function(t){"use strict";t.Config={widthField:"300px",padding:"sm",label:{required:"*",separator:":",colorStar:"#F00"},radioValue:{checked:1,nochecked:0},checkboxValue:{checked:1,nochecked:0},checkboxText:{0:"Нет",1:"Да"},valuePassword:"*********",formatDateUser:"DD.MM.YYYY",formatDateSave:"YYYY-MM-DD",formatDateTimeUser:"DD.MM.YYYY HH:MI:SS",formatDateTimeSave:"YYYY-MM-DD HH:MI:SS",separatorDate:[".","-","/",":"],iconBtnDate:{currentDate:"check",calendarDate:"calendar",removeDate:"remove-sign",calendarDateTime:"time"},defaultMethodForm:"POST",defaultMethodAjax:"POST",skinProgress:"info",noimg:"images/no-image.png",locale:"ru",lbl:{ru:{btn_save:"Сохранить",btn_remove:"Удалить",btn_clear:"Очистить",btn_back:"Назад",btn_add:"Добавить",btn_list:"Список",btn_trash:"Корзина",btn_search:"Найти",btn_close:"Закрыть",btn_cancel:"Отмена",btn_yes:"Да",btn_no:"Нет",btn_ok:"Ок",error:"Ошибка!",success:"Успешно!",message:"Сообщение",question:"Вопрос",noimg:"Картинка не найдена",required:"Обязательное поле",requiredAlert:"Заполните обязательные поля и повторите!",errorAjaxResponse:"Не получен ответ от сервера",successSave:"Данные успешно сохранены",removingError:"Удаление невозможно",removingSuccess:"Данные успешно удалены"},en:{btn_save:"Save",btn_remove:"Delete",btn_clear:"Clear",btn_back:"Back",btn_add:"Add",btn_list:"List",btn_trash:"Trash",btn_search:"Find",btn_close:"Close",btn_cancel:"Cancel",btn_yes:"Yes",btn_no:"No",btn_ok:"Ok",error:"Error!",success:"Success!",message:"Message",question:"Question",noimg:"Picture not found",required:"Required field",requiredAlert:"Fill in the required fields and try again!",errorAjaxResponse:"No response from the server",successSave:"Data saved successfully",removingError:"Deleting can not be",removingSuccess:"Data successfully removed"}}}}(window.ui||{}),function(t){"use strict";function e(e){if(null!==t.api.empty(e,null))for(var i="",n=[],s=e.split(" "),l=s.length,r=t.Config.separatorDate,a=r.length,o=0;o<l;o++)for(var d=0;d<a;d++)if("string"==typeof s[o]&&~s[o].indexOf(r[d])){var h=s[o].split(r[d]);for(var u in h)1==h[u].length?(i+="0"+h[u]+r[d],n.push("0"+h[u])):(i+=h[u]+r[d],n.push(h[u]));i=t.api.trim(i,r[d])+" "}return 1==l&&(n.push("00"),n.push("00"),n.push("00")),""==i&&(i=e),i.length<20&&(i+="00:00:00"),{string:t.api.trim(i," "),array:n}}t.FormatDate=function(i,n){if("string"==typeof n?this._format=n:this._format=t.Config.formatDateTimeSave,this._arrFormatDate=[],this._arrFormatTime=[],this._keysFormat={},this._separator=t.Config.separatorDate,"number"==typeof i)this._date=new Date,this._date.setTime(1e3*i);else if("string"==typeof i&&""!==i){var s=e(i).array;this._date=new Date(s[0],s[1]-1,s[2],s[3],s[4],s[5])}else this._date=null},t.FormatDate.prototype={_separatorDate:null,_separatorTime:null,_strDate:null,_getKeyFormat:function(){var t=this._date.getFullYear(),e=this._date.getMonth()+1,i=this._date.getDate(),n=this._date.getHours(),s=this._date.getMinutes(),l=this._date.getSeconds();return this._keysFormat={yyyy:t,yy:String(t).substring(String(t).length-2),mm:e<10?"0"+e:e,dd:i<10?"0"+i:i,hh:n<10?"0"+n:n,mi:s<10?"0"+s:s,ss:l<10?"0"+l:l},this._keysFormat},_parseFormat:function(){for(var t=this._format.toLowerCase().split(" "),e=this._separator.length,i=0;i<e;i++)"string"==typeof t[0]&&~t[0].indexOf(this._separator[i])&&(this._arrFormatDate=t[0].split(this._separator[i]),this._separatorDate=this._separator[i]);for(var n=0;n<e;n++)if("string"==typeof t[1]&&~t[1].indexOf(this._separator[n])){for(var s=t[1].split(this._separator[n]),l=s.length,r=0;r<l;r++)this._arrFormatTime.push(s[r]);this._separatorTime=this._separator[n]}return[this._arrFormatDate,this._arrFormatTime]},_buildStringDate:function(){this._getKeyFormat(),this._parseFormat();var t="",e="";for(var i in this._arrFormatDate)this._keysFormat.hasOwnProperty(this._arrFormatDate[i])&&(t+=this._keysFormat[this._arrFormatDate[i]],t+=this._separatorDate);for(var n in this._arrFormatTime)this._keysFormat.hasOwnProperty(this._arrFormatTime[n])&&(e+=this._keysFormat[this._arrFormatTime[n]],e+=this._separatorTime);var s=t.substring(0,t.length-1),l=e.substring(0,e.length-1);return this._strDate=(s+" "+l).replace(/\s{2,}/g," ").trim(),this._strDate},getDate:function(){return null!==this._date?this._buildStringDate():null},getCurrentDate:function(){return this._date=new Date,this._buildStringDate()}}}(window.ui||{}),function(t){"use strict";t.CSS={readOnlyMaxHeight:"read-only-max-height",page:{main:"main",header:"page-header"},newLine:"row",iconClass:"glyphicon",widthClass:"col-md",inputGroupClass:"input-group",inputGroupAddonClass:"input-group-addon",formGroupClass:"form-group",formControlClass:"form-control",controlLabelClass:"control-label",inputGroupBtnClass:"input-group-btn",disabledClass:"disabled",requiredClass:"required",validateErrorClass:"validate-error",validateFieldBlockClass:"validate-field-block",formBlockHiddenClass:"form-hidden-data",checkedClass:"checked",satrClass:"star",radioClass:"radio",radioInlineClass:"radio-inline",checkboxClass:"checkbox",checkboxInlineClass:"checkbox-inline",alert:{alert:"alert",link:"alert-link",skin:{warning:"alert-warning",info:"alert-info",success:"alert-success",danger:"alert-danger"}},btn:{btnClass:"btn",btnBlockClass:"btn-block",btnGroup:{group:"btn-group",toolbar:"btn-toolbar",vertical:"btn-group-vertical",justified:"btn-group-justified"}},tableClass:{table:"table",skin:{bordered:"table-bordered",default:"table-bordered-none"},striped:"table-striped",condensed:"table-condensed",hover:"table-hover",responsive:"table-responsive",rowNum:"table-row-number"},alignClass:{text:{right:"text-right",center:"text-center"},block:{clear:"clearfix",left:"pull-left",right:"pull-right",center:"center-block"}},prefixClass:{field:"has",text:"text",button:"btn"},panelClass:{panel:"panel",panelBody:"panel-body",panelFoot:"panel-footer",panelHead:"panel-heading",panelTitle:"panel-title"},skinClass:{default:{disabled:"disabled",active:"active",success:"success",warning:"warning",danger:"danger",info:"info",link:"link",default:"default",error:"error",primary:"primary",muted:"muted"},panel:{default:"panel-default",primary:"panel-primary",success:"panel-success",warning:"panel-warning",danger:"panel-danger",info:"panel-info"}},pagination:{type:{pager:"pager",default:"pagination"},item:{active:"active",disabled:"disabled"},side:{rirht:"next",left:"previous"},size:{lg:"pagination-lg",sm:"pagination-sm"}},sizeClass:{input:{lg:"input-group-lg",sm:"input-group-sm"},field:{sm:"input-sm"},button:{lg:"btn-lg",sm:"btn-sm",xs:"btn-xs"}},paddingClass:{lg:"well-lg",sm:"well-sm",xs:"well-xs"},resizeStyle:{none:"none",vertical:"vertical",horizontal:"horizontal"},modal:{modal:"modal",dialog:"modal-dialog",content:"modal-content",header:"modal-header",title:"modal-title",body:"modal-body",footer:"modal-footer",close:"close",size:{lg:"modal-lg",sm:"modal-sm"}},btnClose:"close",progress:{striped:"progress-striped",progress:"progress",bar:"progress-bar",active:"active",sr:"sr-only",skin:{success:"progress-bar-success",info:"progress-bar-info",warning:"progress-bar-warning",danger:"progress-bar-danger"}}}}(window.ui||{}),function(t){"use strict";t.dom=function(t){this.elements=document.querySelectorAll(t)},t.dom.prototype={before:function(t){for(var e=0;e<this.elements.length;e++)this.elements[e].insertBefore(t,this.elements[e].firstChild);return this},append:function(t){for(var e=0;e<this.elements.length;e++)this.elements[e].appendChild(t);return this},remove:function(){for(var t=0;t<this.elements.length;t++)this.elements[t].remove();return this}},t.api={escapeHtml:function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,function(t){return e[t]})},clear:function(t){return t.removeAttribute("value"),t.defaultValue="",t},reload:function(t){window.location.href=this.empty(t,window.location.href)},reloadBack:function(){window.location.href=document.referrer},isNumeric:function(t){var e,i,n="0123456789.",s=!0;for(i=0;i<t.length&&1==s;i++)e=t.charAt(i),n.indexOf(e)==-1&&(s=!1);return s},disabledElement:function(e,i){return null!==e&&(i?(e.setAttribute("disabled","disabled"),e.classList.add(t.CSS.disabledClass)):(e.removeAttribute("disabled"),e.classList.remove(t.CSS.disabledClass)),!0)},findParent:function(t,e){return t.closest(e)},addEvents:function(e,i,n,s){if("object"==typeof e)for(var l=0,r=e.length;l<r;l++)new t.dom("#"+e[l]).on(i,n,s);else new t.dom("#"+e).on(i,n,s)},inArray:function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},empty:function(t,e){return void 0!==t&&null!==t?t:e},trim:function(t,e){e=this.empty(e,"s");var i="^"+e+"+|"+e+"+$";return t.replace(new RegExp(i),"")},arrayMerge:function(t,e){for(var i in e)t.push(e[i]);return t},buildObject:function(e,i,n,s){for(var l="string"==typeof i?t.api.parseName(i):i,r=0;r<s;r++)delete l[r];if(l.hasOwnProperty(s)){var a=l[s];if(delete l[s],s++,0!=Object.keys(l).length)return e.hasOwnProperty(a)||(e[a]={}),this.buildObject(e[a],l,n,s);t.api.empty(a,!1)||(a=Object.keys(e).length),e[a]=n}},parseName:function(t){return t=t.replace(/]/g,""),t.split("[")},existProperty:function(t,e,i){return null!==t&&t.hasOwnProperty(e)?t[e]:i},setValue:function(e,i,n){return n=t.api.empty(n,""),"object"==typeof e&&null!==e?i in e?e[i]:n:(e="boolean"==typeof e?Number(e):e,t.api.empty(e,n))},getParams:function(t){var e=window.location.search.substr(1),i=null!=e&&""!=e?e:{};if(Object.keys(i).length){for(var n={},s=i.split("&"),l=0;l<s.length;l++){var r=s[l].split("=");n[r[0]]=r[1]}return this.empty(t,!1)!==!1?n.hasOwnProperty(t)?n[t]:null:n}return null},show:function(t){null!==t&&(t.style.visibility="visible")},hide:function(t){null!==t&&(t.style.visibility="hidden")},toggle:function(t){null!==t&&("hidden"===t.style.visibility?t.style.visibility="visible":t.style.visibility="hidden")}}}(window.ui||{}),function(t){"use strict";var e=["text","password","image","button","checkbox","file","hidden","radio","reset","submit","week","url","time","tel","search","range","number","month","email","datetime-local","color","date","datetime"],i=function(){return new t.Element("span").setContentElement(t.Config.label.required).addClassElement(t.CSS.satrClass).addStyleElement("color",t.Config.label.colorStar).toHTML()},n=function(){return new t.Element("small").addClassElement(t.CSS.validateErrorClass).addClassElement(t.CSS.prefixClass.text+"-"+t.CSS.skinClass.default.danger).toHTML()},s=function(t){return t.replace(/\[/g,"_").replace(/\]/g,"")};t.Element=function(t){this.element=document.createElement(t),this.tag_name=t},t.Element.prototype={_thead:null,_tbody:null,_tfoot:null,_tr:null,_th:null,_td:null,setOnClick:function(e){return e=t.api.empty(e,!1),e!==!1&&this.element.setAttribute("onclick",e),this},addRowHead:function(e){return null===this._thead&&(this._thead=this.element.createTHead()),this._tr=this._thead.insertRow(t.api.empty(e,0)),this},addCellHead:function(e,i){return this._th=this._tr.insertCell(t.api.empty(i,0)),this._th.innerHTML=t.api.empty(e,""),this},addBlockBody:function(){return this._tbody=this.element.appendChild(document.createElement("tbody")),this},addRowBody:function(e){return null===this._tbody&&this.addBlockBody(),this._tr=this._tbody.insertRow(t.api.empty(e,0)),this},addCellBody:function(e,i){return this._td=this._tr.insertCell(t.api.empty(i,this._tr.children.length)),this._td.innerHTML=t.api.empty(e,""),this},addAttrTable:function(t,e,i){return null!==i&&("table"===t?this.element.setAttribute(e,i):"thead"===t?this._thead.setAttribute(e,i):"tbody"===t?this._tbody.setAttribute(e,i):"tfoot"===t?this._tfoot.setAttribute(e,i):"tr"===t?this._tr.setAttribute(e,i):"th"===t?this._th.setAttribute(e,i):"td"===t&&this._td.setAttribute(e,i)),this},addStyleTable:function(t,e,i){var n={};return"table"===t?n=this.element:"thead"===t?n=this._thead:"tbody"===t?n=this._tbody:"tfoot"===t?n=this._tfoot:"tr"===t?n=this._tr:"th"===t?n=this._th:"td"===t&&(n=this._td),n.style.hasOwnProperty(e)&&(n.style[e]=i),this},setIdElement:function(t,e){return"string"==typeof t||"number"==typeof t?this.element.id=t:"string"==typeof e&&(this.element.id=s(e)),this},setForLabelElement:function(e,i){return t.api.inArray(["label"],this.tag_name)!=-1&&("string"==typeof e?this.element.setAttribute("for",e):"string"==typeof i&&this.element.setAttribute("for",s(i))),this},setNameElement:function(e){return t.api.inArray(["input","textarea","select","button","submit"],this.tag_name)!=-1&&null!==e&&(e=e.replace(/-/g,"_"),this.element.setAttribute("name",e)),this},setValueElement:function(e,i){var n=t.api.setValue(e,i,null);return t.api.inArray(["input","select","option","button"],this.tag_name)!=-1?this.element.setAttribute("value",n):t.api.inArray(["textarea"],this.tag_name)!=-1&&(this.element.innerHTML=n),this},setCheckedElement:function(e){return e===!0&&t.api.inArray(["input"],this.tag_name)!=-1&&(this.element.classList.add(t.CSS.checkedClass),this.element.setAttribute("checked","checked")),this},setSelectedElement:function(e){return e===!0&&t.api.inArray(["option"],this.tag_name)!=-1&&this.element.setAttribute("selected","selected"),this},setCaptionElement:function(e,s){return this.element.innerHTML=e,s&&(this.element.innerHTML+=i()),t.api.empty(e,!1)&&(this.element.innerHTML+=t.Config.label.separator+" "),s&&(this.element.innerHTML+=n()),this},setCaptionRadioElement:function(e,s){return s&&(this.element.innerHTML+=i()),t.api.empty(e,!1)&&(this.element.innerHTML+=e),s&&(this.element.innerHTML+=n()),this},setContentElement:function(t){return null!==t&&(this.element.innerHTML=t),this},addChildBefore:function(t){return this.element.insertBefore(t,this.element.firstChild),this},addChildAfter:function(t){return this.element.appendChild(t),this},addClassElement:function(t){return""!==t&&null!==t&&this.element.classList.add(t),this},setDisabledElement:function(e){return e===!0&&(this.element.classList.add(t.CSS.disabledClass),this.element.setAttribute("disabled","disabled")),this},setReadOnly:function(){return this.element.readOnly=!0,this},setRequiredElement:function(e){return e===!0&&(this.element.classList.add(t.CSS.requiredClass),this.element.setAttribute("required","required")),this},setIconElement:function(e){return this.element.classList.add(t.CSS.iconClass),this.element.classList.add(t.CSS.iconClass+"-"+e),this},setTypeElement:function(i){return t.api.inArray(["input","button"],this.tag_name)!=-1&&(t.api.inArray(e,i)==-1&&(i="text"),this.element.setAttribute("type",i)),t.api.inArray(["link","script"],this.tag_name)!=-1&&this.element.setAttribute("type",i),this},setUrlElement:function(e){return t.api.inArray(["a","link"],this.tag_name)!=-1&&this.element.setAttribute("href",e),t.api.inArray(["img","script"],this.tag_name)!=-1&&this.element.setAttribute("src",e),this},setAttrElement:function(t,e){return null!==e&&this.element.setAttribute(t,e),this},setSkinElement:function(e,i){var n=null;return t.CSS.skinClass.hasOwnProperty(e)&&t.CSS.skinClass[e].hasOwnProperty(i)?n=t.CSS.skinClass[e][i]:t.CSS.skinClass.default.hasOwnProperty(i)&&(n="text"===e?t.CSS.prefixClass.text+"-"+t.CSS.skinClass.default[i]:"field"===e?t.CSS.prefixClass.field+"-"+t.CSS.skinClass.default[i]:"button"===e?t.CSS.prefixClass.button+"-"+t.CSS.skinClass.default[i]:t.CSS.skinClass.default[i]),null!==n&&this.element.classList.add(n),this},setSizeElement:function(e,i){return t.CSS.sizeClass.hasOwnProperty(e)&&t.CSS.sizeClass[e].hasOwnProperty(i)&&this.element.classList.add(t.CSS.sizeClass[e][i]),this},setPaddingElement:function(e){return t.CSS.paddingClass.hasOwnProperty(e)&&this.element.classList.add(t.CSS.paddingClass[e]),this},setPsitionElement:function(e){return t.CSS.alignClass.block.hasOwnProperty(e)&&this.element.classList.add(t.CSS.alignClass.block[e]),this},setHeightElement:function(t){return"string"==typeof t&&(this.element.style.height=t),"number"==typeof t&&(this.element.style.height=t+"px"),this},setWidthElement:function(e){return"number"==typeof e&&this.element.classList.add(t.CSS.widthClass+"-"+e),"string"==typeof e&&(this.element.style.width=e),this},getClone:function(){return this.element.cloneNode(!0)},addStyleElement:function(t,e){return this.element.style[t]=e,this},getElement:function(){return this.element},toHTML:function(){return this.element.outerHTML},appendHTML:function(e){return new t.dom(e).append(this.element),this}}}(window.ui||{}),function(t){"use strict";t.Alert=function(e){this._alertBlockId=t.api.empty(e,"alert-block-html"),this.error=[]},t.Alert.prototype.addError=function(t,e,i){return this._addParams("danger",t,e,i),this},t.Alert.prototype.addInfo=function(t,e,i){return this._addParams("info",t,e,i),this},t.Alert.prototype.addSuccess=function(t,e,i){return this._addParams("success",t,e,i),this},t.Alert.prototype.addWarning=function(t,e,i){return this._addParams("warning",t,e,i),this},t.Alert.prototype._addParams=function(e,i,n,s){return t.api.empty(n,null)&&this.error.push({skin:t.CSS.alert.skin[e],title:t.api.empty(i,null),content:n,link:t.api.empty(s,null)}),this},t.Alert.prototype._buildBlockAlert=function(e){var i=new t.Element("div").addClassElement(t.CSS.alert.alert).addClassElement(e.skin).addChildAfter(new t.Element("button").addClassElement(t.CSS.btnClose).setContentElement("&times;").setOnClick("this.parentNode.remove()").getElement());if(e.title&&i.addChildAfter(new t.Element("strong").setContentElement(e.title+" ").getElement()),e.content){var n=e.link?"a":"span";i.addChildAfter(new t.Element(n).setUrlElement(e.link).addClassElement(e.link?t.CSS.alert.link:null).setContentElement(e.content).getElement())}return i.getElement()},t.Alert.prototype._buildParentBlock=function(){var e=new t.Element("div").addClassElement(this._alertBlockId);for(var i in this.error)e.addChildBefore(this._buildBlockAlert(this.error[i]));return e.getElement()},t.Alert.prototype.getElement=function(){return this._buildParentBlock()},t.Alert.prototype.toHTML=function(){return this.error.length>0?this._buildParentBlock().outerHTML:""},t.Alert.prototype.appendHTML=function(e,i){return new t.dom("."+this._alertBlockId).remove(),this.error.length>0&&(i?new t.dom(e).before(this.getElement()):new t.dom(e).append(this.getElement())),this}}(window.ui||{}),function(t){"use strict";function e(t){return t=Number(t),t<n||t>s||isNaN(t)?n:t}function i(t){if(!t.target.matches(".btn, ."+l+", .btn *, ."+l+" *")){var e=document.querySelector("."+l);null!==e&&(e.remove(),this.removeEventListener("click",i))}}var n=1e3,s=3e3,l="calendar";t.Calendar=function(i,n,s){this._date=new Date,this._date.setFullYear(t.api.empty(e(i),this._date.getFullYear())),this._date.setMonth(t.api.empty(n,this._date.getMonth())),this._date.setDate(t.api.empty(s,1)),this._year=this._date.getFullYear(),this._month=this._date.getMonth(),this._currentDate=new Date,this._currentDate.getFullYear()===this._year&&this._currentDate.getMonth()===this._month&&(this._currentDay=this._currentDate.getDate()),this._day=t.api.empty(s,this._date.getDate)},t.Calendar.prototype={_x:null,_y:null,_formatUser:t.Config.formatDateUser,_formatSave:t.Config.formatDateSave,_selectorUser:null,_selectorSave:null,_width:255,_locale:"ru",_language:{ru:{choice:"Выбранный день",current:"Текущий день",prev:"Предыдущий месяц",next:"Следующий месяц",days:["ПН","ВТ","СР","ЧТ","ПТ","СУБ","ВС"],month:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]},eu:{choice:"Selected day",current:"Current day",prev:"Previous month",next:"Next month",days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month:["January","February","March","April","May","June","July","August","September","October","November","December"]}},_skinSwitchMonth:"link",_prevIcon:"chevron-left",_nextIcon:"chevron-right",_skinBtn:"default",_sizeInput:"sm",_fontSizeDays:10,_listId:"list-years-calendar",_monthId:"month-name-calendar",addDateUserTo:function(e){return this._selectorUser=t.api.empty(e,null),this},addDateSaveTo:function(e){return this._selectorSave=t.api.empty(e,null),this},setPositionLeft:function(e){return this._x=t.api.empty(e,null),this},setPositionTop:function(e){return this._y=t.api.empty(e,null),this},getDaysInMonth:function(){var t=this._date.getFullYear(),e={R:[31,28,31,30,31,30,31,31,30,31,30,31],L:[31,29,31,30,31,30,31,31,30,31,30,31]},i=null;return i=t%4==0&&t%100!=0||t%400==0?e.L[this._date.getMonth()]:e.R[this._date.getMonth()]},_paramsBtnDay:function(e){var i=[this._skinBtn,null,null],n=this._currentDay===e?"danger":null,s=this._day===e?"primary":null;return null!==n&&(i=[n,t.CSS.skinClass.default.active,this._language[this._locale].current]),null!==s&&(i=[s,t.CSS.skinClass.default.active,this._language[this._locale].choice]),i},_buildDataList:function(){for(var e=new t.Element("datalist").setIdElement(this._listId,null),i=this._year-10,n=this._year+10;i<=n;i++)e.addChildAfter(new t.Element("option").setContentElement(i).getElement());return e.getElement()},_buildInput:function(){return new t.Element("div").addStyleElement("paddingLeft","10px").addChildBefore(new t.Element("input").setTypeElement("text").setAttrElement("list",this._listId).addClassElement(t.CSS.formControlClass).setSizeElement("field",this._sizeInput).setAttrElement("value",this._year).setAttrElement("maxLength",4).setAttrElement("oninput","new ui.Calendar().changeYear(this);").getElement()).addChildAfter(this._buildDataList()).toHTML()},_buildIcon:function(e,i){return new t.Element("div").addChildAfter(new t.Element("div").addClassElement(t.CSS.btn.btnClass).setAttrElement("title",this._language[this._locale][e]).setAttrElement("data-action",e).setAttrElement("onclick","new ui.Calendar().changeMonth(this, '"+e+"');").setSkinElement("button",this._skinSwitchMonth).addStyleElement("padding",0).addChildAfter(new t.Element("span").setIconElement(i).getElement()).getElement()).toHTML()},_buildMonthName:function(){return new t.Element("div").setIdElement(this._monthId,null).addClassElement(t.CSS.alignClass.text.center).addStyleElement("font-weight","bold").setContentElement(this._language[this._locale].month[this._month]).toHTML()},_buildHead:function(){return new t.Element("table").addRowBody(0).addCellBody(this._buildIcon("prev",this._prevIcon),0).addAttrTable("td","width","10px").addCellBody(this._buildInput(),1).addAttrTable("td","width",(this._width-2)/2+"px").addCellBody(this._buildMonthName(),2).addAttrTable("td","width",(this._width-2)/2+"px").addCellBody(this._buildIcon("next",this._nextIcon),3).addAttrTable("td","width","10px").getElement()},_buildCell:function(e){var i=this._paramsBtnDay(e);return new t.Element("div").addClassElement(t.CSS.btn.btnClass).setAttrElement("data-day",e).setSkinElement("button",i[0]).addClassElement(i[1]).setWidthElement("100%").setAttrElement("title",i[2]).addStyleElement("padding","4px").setAttrElement("onclick","new ui.Calendar()._setDateIn(this);").setContentElement(e).toHTML()},_buildBody:function(){var e=this._language[this._locale].days,i=new t.Element("table").addRowHead(0).addStyleTable("tr","font-weight","bold").addStyleTable("tr","font-size",this._fontSizeDays+"px");for(var n in e)e.hasOwnProperty(n)&&i.addCellHead(e[n],n).addAttrTable("th","width",(this._width-30)/7).addAttrTable("th","class",t.CSS.alignClass.text.center);var s=1,l=this.getDaysInMonth(),r="ru"==this._locale?0:1;this._date.setDate(1);var a=this._date.getDay()+r;i.addBlockBody();var o=0;i.addRowBody(o);for(var d=1;d<a;d++)i.addCellBody("",null);a=0===a?1:a;for(var h=a;h<8;h++)i.addCellBody(this._buildCell(s),null),s++;for(o++;s<=l;){i.addRowBody(o);for(var u=1;u<=7&&s<=l;u++)i.addCellBody(this._buildCell(s),null).addStyleTable("td","padding","1px"),s++;for(u;u<8;u++)i.addCellBody("",null);o++}return i.getElement()},_buildPanel:function(){return new t.Element("div").addClassElement(t.CSS.panelClass.panel).addClassElement(t.CSS.skinClass.panel.default).setWidthElement(this._width+"px").addChildBefore(new t.Element("div").addClassElement(t.CSS.panelClass.panelHead).addChildAfter(this._buildHead()).getElement()).addChildAfter(new t.Element("div").addClassElement(t.CSS.panelClass.panelBody).addChildAfter(this._buildBody()).getElement()).getElement()},_buildParentBlock:function(){var e=document.querySelector("."+l);null!==e&&e.remove();var n=new t.Element("div").setWidthElement(this._width+"px").addClassElement(l).setAttrElement("data-month",this._month).setAttrElement("data-year",this._year).setAttrElement("data-day",this._day).addChildAfter(this._buildPanel());return null!==this._selectorUser&&(n.setAttrElement("data-selector-user",this._selectorUser),n.setAttrElement("date-format-user",this._formatUser)),null!==this._selectorSave&&(n.setAttrElement("data-selector-save",this._selectorSave),n.setAttrElement("date-format-save",this._formatSave)),null===this._x&&null===this._y||n.addStyleElement("left",Number(this._x)-this._width/2+"px").addStyleElement("top",Number(this._y)+"px").addStyleElement("position","absolute").addStyleElement("z-index",1e4),window.addEventListener("click",i),n.getElement()},changeMonth:function(e,i){var n=t.api.findParent(e,"."+l),s=n.querySelector("."+t.CSS.panelClass.panelBody),r=n.querySelector("#"+this._monthId),a=n.querySelector("#"+this._listId),o=n.querySelector("input[list="+this._listId+"]"),d=n.getAttribute("data-month"),h=n.getAttribute("data-year"),u=n.getAttribute("data-day"),m=new Date(h,d,u);"next"===i?m.setMonth(m.getMonth()+1):"prev"===i&&m.setMonth(m.getMonth()-1);var c=m.getMonth(),_=m.getFullYear(),p=m.getDate();n.setAttribute("data-month",c),n.setAttribute("data-year",_),n.setAttribute("data-day",p);var f=new t.Calendar(_,c,p);r.innerHTML=this._language[this._locale].month[c],s.replaceChild(f._buildBody(),s.children[0]),a.parentNode.replaceChild(f._buildDataList(),a),o.value=_},changeYear:function(i){var n=t.api.findParent(i,"."+l);4==String(i.value).length?(n.setAttribute("data-year",e(i.value)),n.className=l+" has-success",this.changeMonth(i,null)):n.className=l+" has-error"},_setDateIn:function(e){var n=t.api.findParent(e,"."+l),s=n.getAttribute("data-month"),r=n.getAttribute("data-year"),a=e.getAttribute("data-day"),o=new Date(r,s,a),d=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate();if(n.hasAttribute("data-selector-user")){var h=n.getAttribute("data-selector-user"),u=n.getAttribute("date-format-user");document.body.querySelector(h).setAttribute("value",new t.FormatDate(d,u).getDate())}if(n.hasAttribute("data-selector-save")){var m=n.getAttribute("data-selector-save"),c=n.getAttribute("date-format-save");document.body.querySelector(m).setAttribute("value",new t.FormatDate(d,c).getDate())}n.remove(),window.removeEventListener("click",i)},toHTML:function(){return this._buildParentBlock().outerHTML},appendHTML:function(e){return new t.dom(e).append(this._buildParentBlock()),this}}}(window.ui||{}),function(t){"use strict";t.FFText=function(e,i,n){this._value=t.api.empty(e,null),this._name=t.api.empty(i,null),this._caption=t.api.empty(n,null)},t.FFText.prototype={_leftIcon:null,_rightIcon:null,_leftMarker:null,_rightMarker:null,_widthCaption:null,_widthBlock:null,_id:null,_padding:t.Config.padding,_skin:null,_size:null,_disabled:!1,_required:!1,setRequired:function(e){return this._required=t.api.empty(e,!0),this},setDisabled:function(){return this._disabled=!0,this},setSize:function(t){return this._size=t,this},setSkin:function(t){return this._skin=t,this},setLeftMarker:function(t){return this._leftMarker=t,this},setRightMarker:function(t){return this._rightMarker=t,this},setLeftIcon:function(t){return this._leftIcon=t,this},setRightIcon:function(t){return this._rightIcon=t,this},setWidthCaption:function(t){return this._widthCaption=t,this},setWidthBlock:function(t){return this._widthBlock=t,this},setId:function(t){return this._id=t,this},setPadding:function(t){return this._padding=t,this},_buildCaption:function(){var e=new t.Element("label").addClassElement(t.CSS.controlLabelClass).setForLabelElement(this._id,this._name).setCaptionElement(this._caption,this._required);return"number"==typeof this._widthCaption&&e.setWidthElement(this._widthCaption).addClassElement(t.CSS.alignClass.text.right),e.getElement()},_buildField:function(){return new t.Element("input").setTypeElement("text").setNameElement(this._name).setIdElement(this._id,this._name).setValueElement(this._value,this._name).addClassElement(t.CSS.formControlClass).setDisabledElement(this._disabled).setRequiredElement(this._required).getElement()},_buildLeftMarker:function(){var e=new t.Element("span").addClassElement(t.CSS.inputGroupAddonClass).setContentElement(this._leftMarker);return"string"==typeof this._leftIcon&&e.addChildBefore(new t.Element("span").setIconElement(this._leftIcon).getElement()),e.getElement()},_buildRightMarker:function(){var e=new t.Element("span").addClassElement(t.CSS.inputGroupAddonClass).setContentElement(this._rightMarker);return"string"==typeof this._rightIcon&&e.addChildAfter(new t.Element("span").setIconElement(this._rightIcon).getElement()),e.getElement()},_buildGroupBlock:function(){var e=new t.Element("div").setSizeElement("input",this._size).addChildAfter(this._buildField());return null===this._leftMarker&&null===this._rightMarker&&null===this._rightIcon&&null===this._leftIcon||e.addClassElement(t.CSS.inputGroupClass),"number"==typeof this._widthCaption&&e.setWidthElement(12-this._widthCaption),null===this._leftMarker&&null===this._leftIcon||e.addChildBefore(this._buildLeftMarker()),null===this._rightMarker&&null===this._rightIcon||e.addChildAfter(this._buildRightMarker()),e.getElement()},_buildParentBlock:function(){var e=new t.Element("div").addClassElement(t.CSS.validateFieldBlockClass).setSkinElement("field",this._skin).addChildBefore(this._buildGroupBlock()).setPaddingElement(this._padding);return null!==this._caption&&e.addChildBefore(this._buildCaption()),null!==this._widthBlock&&e.setWidthElement(this._widthBlock),e.getElement()},getElement:function(){return this._buildParentBlock()},toHTML:function(){return this._buildParentBlock().outerHTML},appendHTML:function(e){return new t.dom(e).append(this.getElement()),this}}}(window.ui||{}),function(t){"use strict";t.FFReadOnly=function(e,i,n){this._value=t.api.empty(e,null),this._name=t.api.empty(i,null),this._caption=t.api.empty(n,null)},t.FFReadOnly.prototype={_leftIcon:null,_rightIcon:null,_leftMarker:null,_rightMarker:null,_widthCaption:null,_widthBlock:null,_id:null,_padding:t.Config.padding,_skin:null,_maxHeight:null,setMaxHeight:function(e){return"number"==typeof e&&(e+="px"),this._maxHeight=t.api.empty(e,null),this},setSkin:function(t){return this._skin=t,this},setLeftMarker:function(t){return this._leftMarker=t,this},setRightMarker:function(t){return this._rightMarker=t,this},setLeftIcon:function(t){return this._leftIcon=t,this},setRightIcon:function(t){return this._rightIcon=t,this},setWidthCaption:function(t){return this._widthCaption=t,this},setWidthBlock:function(t){return this._widthBlock=t,this},setId:function(t){return this._id=t,this},setPadding:function(t){return this._padding=t,this},_buildCaption:function(){var e=new t.Element("label").addClassElement(t.CSS.controlLabelClass).setCaptionElement(this._caption,!1).setForLabelElement(this._id,this._name);return"number"==typeof this._widthCaption&&e.setWidthElement(this._widthCaption).addClassElement(t.CSS.alignClass.text.right),e.getElement()},_buildField:function(){var e=t.api.setValue(this._value,this._name),i=new t.Element("p").addClassElement(t.CSS.readOnlyMaxHeight).setSkinElement("text",this._skin).setIdElement(this._id,this._name).setContentElement(e);return null!==this._maxHeight&&i.addStyleElement("maxHeight",this._maxHeight),null===this._leftMarker&&null===this._leftIcon&&null===this._rightMarker&&null===this._rightIcon||i.addClassElement(t.CSS.formControlClass),i.getElement()},_buildLeftMarker:function(){var e=new t.Element("span").addClassElement(t.CSS.inputGroupAddonClass).setContentElement(this._leftMarker);return"string"==typeof this._leftIcon&&e.addChildBefore(new t.Element("span").setIconElement(this._leftIcon).getElement()),
e.getElement()},_buildRightMarker:function(){var e=new t.Element("span").addClassElement(t.CSS.inputGroupAddonClass).setContentElement(this._rightMarker);return"string"==typeof this._rightIcon&&e.addChildAfter(new t.Element("span").setIconElement(this._rightIcon).getElement()),e.getElement()},_buildGroupBlock:function(){var e=new t.Element("div").addChildAfter(this._buildField());return null===this._leftMarker&&null===this._rightMarker&&null===this._rightIcon&&null===this._leftIcon||e.addClassElement(t.CSS.inputGroupClass),"number"==typeof this._widthCaption&&e.setWidthElement(12-this._widthCaption),null===this._leftMarker&&null===this._leftIcon||e.addChildBefore(this._buildLeftMarker()),null===this._rightMarker&&null===this._rightIcon||e.addChildAfter(this._buildRightMarker()),e.getElement()},_buildParentBlock:function(){var e=new t.Element("div").addClassElement(t.CSS.validateFieldBlockClass).addChildBefore(this._buildGroupBlock()).setPaddingElement(this._padding);return null!==this._caption&&e.addChildBefore(this._buildCaption()),null!==this._widthBlock&&e.setWidthElement(this._widthBlock),e.getElement()},getElement:function(){return this._buildParentBlock()},toHTML:function(){return this._buildParentBlock().outerHTML},appendHTML:function(e){return new t.dom(e).append(this.getElement()),this}}}(window.ui||{}),function(t){"use strict";t.FFHidden=function(t,e){this._value=t,this._name=e,this._class=[]},t.FFHidden.prototype={_id:null,_disabled:!1,_required:!1,setRequired:function(e){return this._required=t.api.empty(e,!0),this},setDisabled:function(){return this._disabled=!0,this},setId:function(t){return this._id=t,this},addClass:function(t){return this._class.push(t),this},_buildField:function(){var e=new t.Element("input").setTypeElement("hidden").setNameElement(this._name).setIdElement(this._id,this._name).setValueElement(this._value,this._name).setDisabledElement(this._disabled).setRequiredElement(this._required),i=null;for(i in this._class)e.addClassElement(this._class[i]);return e.getElement()},_buildParentBlock:function(){return new t.Element("div").addClassElement(t.CSS.validateFieldBlockClass).addChildBefore(this._buildField()).getElement()},getElement:function(){return this._buildParentBlock()},toHTML:function(){return this._buildParentBlock().outerHTML},appendHTML:function(e){return new t.dom(e).append(this.getElement()),this}}}(window.ui||{}),function(t){"use strict";t.FFRadio=function(e,i,n){this._value=t.api.setValue(t.api.empty(e,null),i),this._name=t.api.empty(i,null),this._radioList=t.api.empty(n,null),this._disabledIf=[]},t.FFRadio.prototype={_skin:null,_width:null,_widthCaptionBlock:null,_widthCaptionItem:null,_horizontal:!1,_disabled:!1,_required:!1,_caption:null,_padding:t.Config.padding,setCaptionBlock:function(t,e){return this._caption=t,this._widthCaptionBlock=e,this},setWidthCaptionItem:function(t){return this._widthCaptionItem=t,this},setRequired:function(e){return this._required=t.api.empty(e,!0),this},setDisabled:function(){return this._disabled=!0,this},setDisabledIf:function(t){return this._disabledIf.push(t),this},addRadioButton:function(t,e){return this._radioList[t]=e,this},setFieldsHorizontal:function(){return this._horizontal=!0,this},setWidth:function(t){return this._width=t,this},setSkin:function(t){return this._skin=t,this},_buildField:function(e){var i=new t.Element("input").setTypeElement("radio").setNameElement(this._name).addClassElement(this._name).setValueElement(e,this._name).setDisabledElement(this._disabled).setRequiredElement(this._required);return t.api.inArray(this._disabledIf,e)!=-1&&i.setDisabledElement(!0),e==this._value&&i.setIdElement(null,this._name).setCheckedElement(!0),i.getElement()},_buildCaptionBlock:function(){var e=new t.Element("div").addChildAfter(new t.Element("label").setCaptionElement(this._caption,this._required&&t.api.empty(this._caption,!1)).getElement());return"number"==typeof this._widthCaptionBlock&&e.setWidthElement(this._widthCaptionBlock).addClassElement(t.CSS.alignClass.text.right),e.getElement()},_buildCaptionItem:function(e,i){var n=new t.Element("label").addChildAfter(new t.Element("span").getElement());return this._required&&t.api.empty(this._caption,!1)?n.setContentElement(i):n.setCaptionRadioElement(i,this._required),"number"==typeof this._widthCaptionItem&&n.setWidthElement(this._widthCaptionItem),n.addChildBefore(this._buildField(e)).getElement()},_buildInlineBlock:function(){var e=new t.Element("div").addClassElement(t.CSS.radioClass).addStyleElement("marginTop",0).setWidthElement(Math.round(12-this._widthCaptionBlock)).addClassElement(t.CSS.radioInlineClass),i=new t.Element("div").addClassElement(t.CSS.radioClass).addStyleElement("marginTop",0);if(this._horizontal===!0){for(var n in this._radioList)i.addChildAfter(this._buildCaptionItem(n,this._radioList[n]));e.addChildAfter(i.getElement())}else for(var s in this._radioList)e.addChildAfter(new t.Element("div").addChildAfter(this._buildCaptionItem(s,this._radioList[s])).getElement());return e.getElement()},_buildParentBlock:function(){var e=new t.Element("div").addClassElement(t.CSS.validateFieldBlockClass).setPaddingElement(this._padding).setSkinElement("field",this._skin).setWidthElement(this._width).addChildBefore(this._buildInlineBlock());return null!==this._caption&&e.addChildBefore(this._buildCaptionBlock()),e.getElement()},getElement:function(){return this._buildParentBlock()},toHTML:function(){return this._buildParentBlock().outerHTML},appendHTML:function(e){return new t.dom(e).append(this.getElement()),this}}}(window.ui||{}),function(t){"use strict";var e="simple",i="inline";t.FFCheckbox=function(e){this._type=t.api.empty(e,i),this._checkboxList=[],this._disabledIf=[],this._requiredIf=[],this._attr={}},t.FFCheckbox.prototype={_caption:null,_skin:null,_width:null,_widthCaptionBlock:null,_widthCaptionItem:null,_horizontal:!1,_disabled:!1,_required:!1,_checkboxValue:t.Config.checkboxValue,_padding:t.Config.padding,_classField:null,setAttr:function(t,e){return this._attr[t]=e,this},setCaptionBlock:function(t,e){return this._caption=t,this._widthCaptionBlock=e,this},setDefaultValues:function(e,i){return this._checkboxValue.checked=t.api.empty(e,t.Config.checkboxValue.checked),this._checkboxValue.nochecked=t.api.empty(i,t.Config.checkboxValue.nochecked),this},setRequired:function(e){return this._required=t.api.empty(e,!0),this},setDisabled:function(){return this._disabled=!0,this},setRequiredIf:function(t){return this._requiredIf.push(t),this},setDisabledIf:function(t){return this._disabledIf.push(t),this},setWidthCaptionItem:function(t){return this._widthCaptionItem=t,this},addCheckbox:function(e,i,n,s){return this._checkboxList[this._checkboxList.length]={name:t.api.empty(i,null),value:t.api.empty(e,null),caption:t.api.empty(n,null),onclick:t.api.empty(s,null)},this},addCheckboxList:function(e){for(var i in e)this._checkboxList[this._checkboxList.length]={name:t.api.existProperty(e[i],"name",null),value:t.api.existProperty(e[i],"value",null),caption:t.api.existProperty(e[i],"caption",null),onclick:t.api.existProperty(e[i],"onclick",null)};return this},setClass:function(t){return this._classField=t,this},setPadding:function(t){return this._padding=t,this},setFieldsHorizontal:function(){return this._horizontal=!0,this},setWidth:function(t){return this._width=t,this},setSkin:function(t){return this._skin=t,this},_buildField:function(e){var i=new t.Element("input").setTypeElement("checkbox").setNameElement(e.name).setDisabledElement(this._disabled).setRequiredElement(this._required).addClassElement(this._classField).setIdElement(null,e.name).setAttrElement("onclick",e.onclick);for(var n in this._attr){var s=this._attr[n];i.setAttrElement(n,s)}return t.api.inArray(this._disabledIf,e.name)!=-1&&i.setDisabledElement(!0),t.api.inArray(this._requiredIf,e.name)!=-1&&i.setRequiredElement(!0),this._checkboxValue.checked==t.api.setValue(e.value,e.name)?i.setCheckedElement(!0).setValueElement(this._checkboxValue.checked,null):i.setValueElement(this._checkboxValue.nochecked,null),i.getElement()},_buildCaptionBlock:function(){var e=new t.Element("div").addChildAfter(new t.Element("label").setCaptionElement(this._caption,this._required&&t.api.empty(this._caption,!1)).getElement());return"number"==typeof this._widthCaptionBlock&&e.setWidthElement(this._widthCaptionBlock).addClassElement(t.CSS.alignClass.text.right),e.getElement()},_buildCaptionItem:function(e){var i=new t.Element("label").addChildAfter(new t.Element("span").getElement());if(this._required&&t.api.empty(this._caption,!1))i.setContentElement(e.caption);else{var n=t.api.inArray(this._requiredIf,e.name)!=-1||this._required;i.setCaptionRadioElement(e.caption,n)}return"number"==typeof this._widthCaptionItem&&i.setWidthElement(this._widthCaptionItem),i.addChildBefore(this._buildField(e)).getElement()},_buildSimpleBlock:function(){var e=new t.Element("div");for(var i in this._checkboxList)e.addChildAfter(this._buildCaptionItem(this._checkboxList[i]));return e.getElement()},_buildInlineBlock:function(){var e=new t.Element("div").addClassElement(t.CSS.checkboxClass).addStyleElement("marginTop",0).addClassElement(t.CSS.checkboxInlineClass);"number"==typeof this._widthCaptionBlock&&e.setWidthElement(Math.round(12-this._widthCaptionBlock));var i=new t.Element("div").addClassElement(t.CSS.checkboxClass).addStyleElement("marginTop",0);if(this._horizontal===!0){for(var n in this._checkboxList)i.addChildAfter(this._buildCaptionItem(this._checkboxList[n]));e.addChildAfter(i.getElement())}else for(var s in this._checkboxList)e.addChildAfter(new t.Element("div").addClassElement(t.CSS.checkboxClass).addChildAfter(this._buildCaptionItem(this._checkboxList[s])).getElement());return e.getElement()},_buildParentBlock:function(){var e=new t.Element("div").addClassElement(t.CSS.validateFieldBlockClass).setPaddingElement(this._padding).setSkinElement("field",this._skin).setWidthElement(this._width).addChildAfter(this._buildInlineBlock());return null!==this._caption&&e.addChildBefore(this._buildCaptionBlock()),e.getElement()},getElement:function(){return this._type==e?this._buildSimpleBlock():this._buildParentBlock()},toHTML:function(){return this._type==e?this._buildSimpleBlock().outerHTM:this._buildParentBlock().outerHTML},appendHTML:function(e){return new t.dom(e).append(this.getElement()),this}}}(window.ui||{}),function(t){"use strict";t.FFTextarea=function(e,i,n){this._value=t.api.empty(e,null),this._name=t.api.empty(i,null),this._caption=t.api.empty(n,null)},t.FFTextarea.prototype={_leftIcon:null,_rightIcon:null,_leftMarker:null,_rightMarker:null,_widthCaption:null,_width:null,_id:null,_padding:t.Config.padding,_skin:null,_size:null,_disabled:!1,_required:!1,_resize:null,_height:null,setHeight:function(t){return this._height=t,this},setResize:function(e){return this._resize=t.api.existProperty(t.CSS.resizeStyle,e,t.CSS.resizeStyle.none),this},setRequired:function(e){return this._required=t.api.empty(e,!0),this},setDisabled:function(){return this._disabled=!0,this},setSize:function(t){return this._size=t,this},setSkin:function(t){return this._skin=t,this},setLeftMarker:function(t){return this._leftMarker=t,this},setRightMarker:function(t){return this._rightMarker=t,this},setLeftIcon:function(t){return this._leftIcon=t,this},setRightIcon:function(t){return this._rightIcon=t,this},setWidthCaption:function(t){return this._widthCaption=t,this},setWidth:function(t){return this._width=t,this},setId:function(t){return this._id=t,this},setPadding:function(t){return this._padding=t,this},_buildCaption:function(){var e=new t.Element("label").addClassElement(t.CSS.controlLabelClass).setForLabelElement(this._id,this._name).setCaptionElement(this._caption,this._required);return"number"==typeof this._widthCaption&&e.setWidthElement(this._widthCaption).addClassElement(t.CSS.alignClass.text.right),e.getElement()},_buildField:function(){var e=new t.Element("textarea").setNameElement(this._name).setIdElement(this._id,this._name).setValueElement(this._value,this._name).addClassElement(t.CSS.formControlClass).setHeightElement(this._height).setDisabledElement(this._disabled).setRequiredElement(this._required);return"string"==typeof this._resize&&e.addStyleElement("resize",this._resize),e.getElement()},_buildLeftMarker:function(){var e=new t.Element("span").addClassElement(t.CSS.inputGroupAddonClass).setContentElement(this._leftMarker);return"string"==typeof this._leftIcon&&e.addChildBefore(new t.Element("span").setIconElement(this._leftIcon).getElement()),e.getElement()},_buildRightMarker:function(){var e=new t.Element("span").addClassElement(t.CSS.inputGroupAddonClass).setContentElement(this._rightMarker);return"string"==typeof this._rightIcon&&e.addChildAfter(new t.Element("span").setIconElement(this._rightIcon).getElement()),e.getElement()},_buildGroupBlock:function(){var e=new t.Element("div").setSizeElement("input",this._size).addChildAfter(this._buildField());return null===this._leftMarker&&null===this._rightMarker&&null===this._rightIcon&&null===this._leftIcon||e.addClassElement(t.CSS.inputGroupClass),"number"==typeof this._widthCaption&&e.setWidthElement(12-this._widthCaption),null===this._leftMarker&&null===this._leftIcon||e.addChildBefore(this._buildLeftMarker()),null===this._rightMarker&&null===this._rightIcon||e.addChildAfter(this._buildRightMarker()),e.getElement()},_buildParentBlock:function(){var e=new t.Element("div").addClassElement(t.CSS.validateFieldBlockClass).setSkinElement("field",this._skin).addChildBefore(this._buildGroupBlock()).setPaddingElement(this._padding);return null!==this._caption&&e.addChildBefore(this._buildCaption()),null!==this._width&&e.setWidthElement(this._width),e.getElement()},getElement:function(){return this._buildParentBlock()},toHTML:function(){return this._buildParentBlock().outerHTML},appendHTML:function(e){return new t.dom(e).append(this.getElement()),this}}}(window.ui||{}),function(t){"use strict";t.FFPassword=function(e,i,n){this._value=t.api.empty(e,null),this._name=t.api.empty(i,null),this._caption=t.api.empty(n,null)},t.FFPassword.prototype={_leftIcon:null,_rightIcon:null,_leftMarker:null,_rightMarker:null,_widthCaption:null,_width:null,_id:null,_padding:t.Config.padding,_skin:null,_size:null,_disabled:!1,_required:!1,setRequired:function(e){return this._required=t.api.empty(e,!0),this},setDisabled:function(){return this._disabled=!0,this},setSize:function(t){return this._size=t,this},setSkin:function(t){return this._skin=t,this},setLeftMarker:function(t){return this._leftMarker=t,this},setRightMarker:function(t){return this._rightMarker=t,this},setLeftIcon:function(t){return this._leftIcon=t,this},setRightIcon:function(t){return this._rightIcon=t,this},setWidthCaption:function(t){return this._widthCaption=t,this},setWidth:function(t){return this._width=t,this},setId:function(t){return this._id=t,this},setPadding:function(t){return this._padding=t,this},_buildCaption:function(){var e=new t.Element("label").addClassElement(t.CSS.controlLabelClass).setForLabelElement(this._id,this._name).setCaptionElement(this._caption,this._required);return"number"==typeof this._widthCaption&&e.setWidthElement(this._widthCaption).addClassElement(t.CSS.alignClass.text.right),e.getElement()},_buildField:function(){return new t.Element("input").setTypeElement("password").setNameElement(this._name).setIdElement(this._id,this._name).setValueElement(this._value,this._name).addClassElement(t.CSS.formControlClass).setDisabledElement(this._disabled).setRequiredElement(this._required).getElement()},_buildLeftMarker:function(){var e=new t.Element("span").addClassElement(t.CSS.inputGroupAddonClass).setContentElement(this._leftMarker);return"string"==typeof this._leftIcon&&e.addChildBefore(new t.Element("span").setIconElement(this._leftIcon).getElement()),e.getElement()},_buildRightMarker:function(){var e=new t.Element("span").addClassElement(t.CSS.inputGroupAddonClass).setContentElement(this._rightMarker);return"string"==typeof this._rightIcon&&e.addChildAfter(new t.Element("span").setIconElement(this._rightIcon).getElement()),e.getElement()},_buildGroupBlock:function(){var e=new t.Element("div").setSizeElement("input",this._size).addChildAfter(this._buildField());return null===this._leftMarker&&null===this._rightMarker&&null===this._rightIcon&&null===this._leftIcon||e.addClassElement(t.CSS.inputGroupClass),"number"==typeof this._widthCaption&&e.setWidthElement(12-this._widthCaption),null===this._leftMarker&&null===this._leftIcon||e.addChildBefore(this._buildLeftMarker()),null===this._rightMarker&&null===this._rightIcon||e.addChildAfter(this._buildRightMarker()),e.getElement()},_buildParentBlock:function(){var e=new t.Element("div").addClassElement(t.CSS.validateFieldBlockClass).setSkinElement("field",this._skin).addChildBefore(this._buildGroupBlock()).setPaddingElement(this._padding);return null!==this._caption&&e.addChildBefore(this._buildCaption()),null!==this._width&&e.setWidthElement(this._width),e.getElement()},getElement:function(){return this._buildParentBlock()},toHTML:function(){return this._buildParentBlock().outerHTML},appendHTML:function(e){return new t.dom(e).append(this.getElement()),this}}}(window.ui||{}),function(t){"use strict";t.FFSelect=function(e,i,n,s){this._value=t.api.empty(e,null),this._name=t.api.empty(i,null),this._caption=t.api.empty(n,null),this._showEmptyItem=t.api.empty(s,!0),this._emptyValue=null,this._emptyText="-- не выбрано --",this._items={}},t.FFSelect.prototype={_leftIcon:null,_rightIcon:null,_leftMarker:null,_rightMarker:null,_widthCaption:null,_width:null,_id:null,_padding:t.Config.padding,_skin:null,_size:null,_disabled:!1,_required:!1,setDataEmptyItem:function(t,e){return this._emptyValue=t,this._emptyText=e,this},setList:function(t){return this._items=t,this},addItem:function(t,e){return this._items[t]=e,this},setRequired:function(e){return this._required=t.api.empty(e,!0),this},setDisabled:function(){return this._disabled=!0,this},setSize:function(t){return this._size=t,this},setSkin:function(t){return this._skin=t,this},setLeftMarker:function(t){return this._leftMarker=t,this},setRightMarker:function(t){return this._rightMarker=t,this},setLeftIcon:function(t){return this._leftIcon=t,this},setRightIcon:function(t){return this._rightIcon=t,this},setWidthCaption:function(t){return this._widthCaption=t,this},setWidth:function(t){return this._width=t,this},setId:function(t){return this._id=t,this},setPadding:function(t){return this._padding=t,this},_buildCaption:function(){var e=new t.Element("label").addClassElement(t.CSS.controlLabelClass).setForLabelElement(this._id,this._name).setCaptionElement(this._caption,this._required);return"number"==typeof this._widthCaption&&e.setWidthElement(this._widthCaption).addClassElement(t.CSS.alignClass.text.right),e.getElement()},_buildEmptyItem:function(){return this._buildItem(this._emptyValue,this._emptyText)},_buildItem:function(e,i){var n=new t.Element("option").setValueElement(e,null).setContentElement(i);return t.api.setValue(this._value,this._name,null)==e&&n.setSelectedElement(!0),n.getElement()},_buildField:function(){var e=new t.Element("select").setNameElement(this._name).setIdElement(this._id,this._name).addClassElement(t.CSS.formControlClass).setDisabledElement(this._disabled).setRequiredElement(this._required);this._showEmptyItem&&e.addChildAfter(this._buildEmptyItem());for(var i in this._items)e.addChildAfter(this._buildItem(i,this._items[i]));return e.getElement()},_buildLeftMarker:function(){var e=new t.Element("span").addClassElement(t.CSS.inputGroupAddonClass).setContentElement(this._leftMarker);return"string"==typeof this._leftIcon&&e.addChildBefore(new t.Element("span").setIconElement(this._leftIcon).getElement()),e.getElement()},_buildRightMarker:function(){var e=new t.Element("span").addClassElement(t.CSS.inputGroupAddonClass).setContentElement(this._rightMarker);return"string"==typeof this._rightIcon&&e.addChildAfter(new t.Element("span").setIconElement(this._rightIcon).getElement()),e.getElement()},_buildGroupBlock:function(){var e=new t.Element("div").setSizeElement("input",this._size).addChildAfter(this._buildField());return null===this._leftMarker&&null===this._rightMarker&&null===this._rightIcon&&null===this._leftIcon||e.addClassElement(t.CSS.inputGroupClass),"number"==typeof this._widthCaption&&e.setWidthElement(12-this._widthCaption),null===this._leftMarker&&null===this._leftIcon||e.addChildBefore(this._buildLeftMarker()),null===this._rightMarker&&null===this._rightIcon||e.addChildAfter(this._buildRightMarker()),e.getElement()},_buildParentBlock:function(){var e=new t.Element("div").addClassElement(t.CSS.validateFieldBlockClass).setSkinElement("field",this._skin).addChildBefore(this._buildGroupBlock()).setPaddingElement(this._padding);return null!==this._caption&&e.addChildBefore(this._buildCaption()),null!==this._width&&e.setWidthElement(this._width),e.getElement()},getElement:function(){return this._buildParentBlock()},toHTML:function(){return this._buildParentBlock().outerHTML},appendHTML:function(e){return new t.dom(e).append(this.getElement()),this}}}(window.ui||{}),function(t){"use strict";t.FFButton=function(){this._buttonList=[],this._disabledIf=[],this._btnId=[],this._class=[]},t.FFButton.prototype={_skin:null,_size:null,_block:!1,_group:null,_active:!1,_hide:{},_width:null,_disabled:!1,_onClick:null,_padding:t.Config.padding,_position:null,setClass:function(t){return this._class=[],this._class.push(t),this},addClass:function(t){return this._class.push(t),this},setPositionBlock:function(t){return this._position=t,this},setPaddingBlock:function(t){return this._padding=t,this},setActive:function(){return this._active=!0,this},hide:function(t){return this._hide[t]=!0,this},setGroup:function(e){return this._group=t.api.existProperty(t.CSS.btn.btnGroup,e,null),this},setBlock:function(){return this._block=!0,this},setDisabled:function(){return this._disabled=!0,this},setDisabledIf:function(t){return this._disabledIf.push(t),this},addButton:function(e,i,n,s,l,r){return this._buttonList[this._buttonList.length]={type:"button",skin:t.api.empty(s,null),name:t.api.empty(i,null),value:t.api.empty(e,null),active:t.api.empty(l,null),caption:t.api.empty(n,null),leftIcon:t.api.empty(r,null),onclick:this._onClick,class:this._class,rightIcon:null,disabled:!1},this},addSubmit:function(e,i,n,s,l,r){return this._buttonList[this._buttonList.length]={type:"submit",skin:t.api.empty(s,null),name:t.api.empty(i,null),value:t.api.empty(e,null),active:t.api.empty(l,null),caption:t.api.empty(n,null),leftIcon:t.api.empty(r,null),onclick:this._onClick,class:this._class,rightIcon:null,disabled:!1},this},addButtonList:function(e){for(var i in e)e.hasOwnProperty(i)&&(this._buttonList[this._buttonList.length]={type:t.api.existProperty(e[i],"type","button"),skin:t.api.existProperty(e[i],"skin",null),name:t.api.existProperty(e[i],"name",null),value:t.api.existProperty(e[i],"value",null),active:t.api.existProperty(e[i],"active",null),caption:t.api.existProperty(e[i],"caption",null),leftIcon:t.api.existProperty(e[i],"leftIcon",null),rightIcon:t.api.existProperty(e[i],"rightIcon",null),onclick:t.api.existProperty(e[i],"onclick",null),disabled:t.api.existProperty(e[i],"disabled",null),class:t.api.existProperty(e[i],"class",this._class)});return this},setWidth:function(t){return this._width=t,this},setSkin:function(t){return this._skin=t,this},setSize:function(t){return this._size=t,this},setOnClick:function(t){return this._onClick=t,this},_getCaption:function(e){var i="";return null!==e.leftIcon&&(i+=new t.Element("span").setIconElement(e.leftIcon).toHTML()+" "),i+=null!==e.caption?e.caption:"",null!==e.rightIcon&&(i+=" "+new t.Element("span").setIconElement(e.rightIcon).toHTML()),i.trim(),i},_buildField:function(e){var i=t.CSS.skinClass.default.default,n=t.api.empty(this._skin,i);null!==e.skin&&(n=t.api.empty(e.skin,i));var s=new t.Element("button").setTypeElement(e.type).setNameElement(e.name).setIdElement(null,e.name).addClassElement(t.CSS.btn.btnClass).setValueElement(e.value,e.name).setSkinElement("button",n).setSizeElement("button",this._size).setDisabledElement(this._disabled).setContentElement(this._getCaption(e)).setOnClick(e.onclick);this._active!==!0&&e.active!==!0||s.addClassElement(t.CSS.skinClass.default.active),this._block===!0&&s.addClassElement(t.CSS.btn.btnBlockClass),t.api.inArray(this._disabledIf,e.name)==-1&&e.disabled!==!0||s.setDisabledElement(!0),this._group===t.CSS.btn.btnGroup.justified&&(s=new t.Element("div").addClassElement(t.CSS.btn.btnGroup.group).addChildAfter(s.getElement()));var l=null;for(l in e.class)s.addClassElement(e.class[l]);var r=s.getElement();return t.api.existProperty(this._hide,e.name,!1)&&t.api.hide(r),r},_buildInlineBlock:function(){var e=new t.Element("div").setPsitionElement(this._position).setPaddingElement(this._padding);this._block===!1&&null!==this._group&&e.addClassElement(this._group);for(var i in this._buttonList)e.addChildAfter(this._buildField(this._buttonList[i]));return e.getElement()},_buildParentBlock:function(){return new t.Element("div").setWidthElement(this._width).addChildBefore(this._buildInlineBlock()).getElement()},getElement:function(){return this._buildParentBlock()},toHTML:function(){return this._buildParentBlock().outerHTML},appendHTML:function(e){return new t.dom(e).append(this.getElement()),this}}}(window.ui||{}),function(t){"use strict";var e=(new Date).getTime(),i="date-user",n="date-hidden",s="block-field-date",l="field-date";t.FFDate=function(i,n,s){this._value=t.api.empty(i,null),this._name=t.api.empty(n,null),this._caption=t.api.empty(s,null),this._id=t.api.empty(this._name,l+"-"+e),this._valueForEvent=[],e++},t.FFDate.prototype={_formatDateUser:t.Config.formatDateUser,_formatDateSave:t.Config.formatDateSave,_widthCaption:null,_widthField:t.Config.widthField,_widthBlock:null,_id:null,_padding:t.Config.padding,_skin:null,_size:null,_disabled:!1,_required:!1,_activeBtn:!1,setDateFormatUser:function(t){return this._formatDateUser=t,this},setDateFormatSave:function(t){return this._formatDateSave=t,this},setActive:function(){return this._activeBtn=!0,this},setRequired:function(e){return this._required=t.api.empty(e,!0),this},setDisabled:function(){return this._disabled=!0,this},setSize:function(t){return this._size=t,this},setSkin:function(t){return this._skin=t,this},setWidthCaption:function(t){return this._widthCaption=t,this},setWidthBlock:function(t){return this._widthBlock=t,this},setWidthField:function(t){return this._widthField=t,this},setId:function(t){return this._id=t,this},setPadding:function(t){return this._padding=t,this},_buildCaption:function(){var e=new t.Element("label").addClassElement(t.CSS.controlLabelClass).setForLabelElement(this._id,this._name).setCaptionElement(this._caption,this._required);return"number"==typeof this._widthCaption&&e.setWidthElement(this._widthCaption).addClassElement(t.CSS.alignClass.text.right),e.getElement()},_buildField:function(){var e=t.api.setValue(this._value,this._name);return this._valueForEvent=[new t.FormatDate(e,this._formatDateUser).getDate(),new t.FormatDate(e,this._formatDateSave).getDate()],new t.Element("div").setSizeElement("input",this._size).addClassElement(t.CSS.btn.btnGroup.group).setIdElement(this._id,this._name).setWidthElement(5).addChildAfter(new t.Element("input").setTypeElement("text").setDisabledElement(this._disabled).setRequiredElement(this._required).setAttrElement("value",this._valueForEvent[0]).addClassElement(t.CSS.formControlClass).addClassElement(i).setReadOnly().getElement()).addChildAfter(new t.Element("input").setTypeElement("hidden").setNameElement(this._name).setDisabledElement(this._disabled).setRequiredElement(this._required).setAttrElement("value",this._valueForEvent[1]).addClassElement(n).getElement()).getElement()},_buildButtons:function(){return new t.Element("div").addClassElement(t.CSS.btn.btnGroup.group).setWidthElement(7).addChildAfter((new t.FFButton).setOnClick("new ui.FFDate()._setCurrentDate(this);").addButton(null,null,null,null,this._activeBtn,t.Config.iconBtnDate.currentDate).setWidth("120px").setOnClick("new ui.FFDate()._calendar(this, '"+this._id+"');").addButton(null,null,null,null,this._activeBtn,t.Config.iconBtnDate.calendarDate).setWidth("120px").setOnClick("new ui.FFDate()._clearDate(this);").addButton(null,null,null,null,this._activeBtn,t.Config.iconBtnDate.removeDate).setWidth("120px").setPaddingBlock(null).setGroup("justified").setSize(this._size).getElement()).getElement()},_buildGroupBlock:function(){var e=new t.Element("div").addChildAfter(this._buildField()).addChildAfter(this._buildButtons());return"number"==typeof this._widthCaption&&e.setWidthElement(12-this._widthCaption),e.getElement()},_buildParentBlock:function(){var e=new t.Element("div").addClassElement(t.CSS.validateFieldBlockClass).addClassElement(s).setSkinElement("field",this._skin).addChildBefore(this._buildGroupBlock()).setPaddingElement(this._padding);return null!==this._caption&&e.addChildBefore(this._buildCaption()),null!==this._widthBlock&&e.setWidthElement(this._widthBlock),e.getElement()},getElement:function(){return this._buildParentBlock()},toHTML:function(){return this._buildParentBlock().outerHTML},_setCurrentDate:function(e){var i=t.api.findParent(e,"."+s);i.querySelector("input[type=text]").setAttribute("value",new t.FormatDate(null,this._formatDateUser).getCurrentDate()),i.querySelector("input[type=hidden]").setAttribute("value",new t.FormatDate(null,this._formatDateSave).getCurrentDate())},_calendar:function(e,i){var n=e.getBoundingClientRect(),l=t.api.findParent(e,"."+s),r=l.querySelector("#"+i+" > input[type=hidden]").value,a=new Date;""!=r&&(a=new Date(r)),new t.Calendar(a.getFullYear(),a.getMonth(),a.getDate()).setPositionLeft(n.left+(n.right-n.left)/2).setPositionTop(n.bottom).addDateUserTo("#"+i+" > input[type=text]").addDateSaveTo("#"+i+" > input[type=hidden]").appendHTML("body")},_clearDate:function(e){var i=t.api.findParent(e,"."+s);i.querySelector("input[type=text]").removeAttribute("value"),i.querySelector("input[type=hidden]").removeAttribute("value")},appendHTML:function(e){return new t.dom(e).append(this.getElement()),this}}}(window.ui||{}),function(t){"use strict";var e=(new Date).getTime();t.Modal=function(i,n){this._title=null,this._titleSmall=null,this._icon=null,this._content=null,this._size=null,this._skin=null,this._locale=t.api.empty(n,t.Config.lbl[t.Config.locale]),this._lbl=t.api.existProperty(t.Config.lbl,this._locale,t.Config.lbl[t.Config.locale]),this._buttons=new t.FFButton,this._id=t.api.empty(i,e),e++},t.Modal.prototype={getId:function(){return this._id},addButton:function(e,i,n,s,l){return this._buttons.setOnClick(e).addButton(null,null,t.api.empty(i,null),t.api.empty(n,null),t.api.empty(s,!1),t.api.empty(l,null)),this},setSize:function(e){return this._size=t.api.existProperty(t.CSS.modal.size,e,null),this},setTitle:function(t,e){return this._title=t,this._titleSmall=e,this},setContent:function(t){return this._content=t,this},_buildHead:function(){var e=new t.Element("div").addClassElement(t.CSS.modal.header).addChildAfter((new t.FFButton).addClass(t.CSS.modal.close).setOnClick("new ui.Modal(null, null)._removeModal(this);").addButton(null,null,"&times;",null,null,null).getElement());return null!==this._title&&e.addChildAfter(new t.Element("h4").setSkinElement("text",this._skin).addChildAfter(new t.Element("span").setIconElement(this._icon).getElement()).addChildAfter(new t.Element("span").setContentElement(" "+this._title+" ").getElement()).addChildAfter(new t.Element("small").setContentElement(this._titleSmall).getElement()).getElement()),e.getElement()},_buildBody:function(){return new t.Element("div").addClassElement(t.CSS.modal.body).setContentElement(t.api.empty(this._content,"")).getElement()},_buildFoot:function(){return new t.Element("div").addClassElement(t.CSS.modal.footer).addChildAfter(this._buildButtons()).getElement()},_buildButtons:function(){
return this._buttons.setGroup("toolbar").setPositionBlock("right"),this._buttons.getElement()},_buildModal:function(){return new t.Element("div").addStyleElement("display","block").addClassElement(t.CSS.modal.modal).setIdElement(this._id,null).addChildAfter(new t.Element("div").addClassElement(t.CSS.modal.dialog).addClassElement(this._size).addChildAfter(new t.Element("div").addClassElement(t.CSS.modal.content).addChildAfter(this._buildHead()).addChildAfter(this._buildBody()).addChildAfter(this._buildFoot()).getElement()).getElement()).getElement()},alert:function(e){return this.removeModal(null),this._title=this._lbl.message,this._icon="envelope",this._skin=t.CSS.skinClass.default.primary,this._content=e,this._buttons.setOnClick("new ui.Modal()._removeModal(this);").addButton(null,null,this._lbl.btn_close,"default",!1,null),this.appendHTML("body"),this},confirm:function(e,i,n){return this.removeModal(null),this._title=this._lbl.question,this._icon="question-sign",this._skin=t.CSS.skinClass.default.primary,this._content=e,this._buttons.setOnClick("new ui.Modal()._removeModal(this);"+i).addButton(null,null,this._lbl.btn_yes,"default",!1,null).setOnClick("new ui.Modal()._removeModal(this);"+n).addButton(null,null,this._lbl.btn_no,"default",!1,null),this.appendHTML("body"),this},error:function(e){return this.removeModal(null),this._title=this._lbl.error,this._icon="ban-circle",this._skin=t.CSS.skinClass.default.danger,this._content=e,this._buttons.setOnClick("new ui.Modal()._removeModal(this);").addButton(null,null,this._lbl.btn_yes,"default",!1,null),this.appendHTML("body"),this},_removeModal:function(e){var i=t.api.findParent(e,"."+t.CSS.modal.modal);i.remove()},removeModal:function(e){var i=document.getElementById(t.api.empty(e,this._id));return i&&i.remove(),this},getElement:function(){return this._buildModal()},toHTML:function(){return this._buildModal().outerHTML},appendHTML:function(e){return new t.dom(e).append(this.getElement()),this}}}(window.ui||{}),function(t){"use strict";var e=(new Date).getTime();t.Progress=function(i){this._id=t.api.empty(i,e),e++},t.Progress.prototype={_skin:t.api.existProperty(t.CSS.progress.skin,t.Config.skinProgress,null),setSkin:function(e){return this._skin=t.api.existProperty(t.CSS.progress.skin,e,this._skin),this},getId:function(){return this._id},_buildProgress:function(){return new t.Element("div").addStyleElement("display","block").addClassElement(t.CSS.modal.modal).setIdElement(this._id,null).addChildAfter(new t.Element("div").addStyleElement("height","3px").addClassElement(t.CSS.progress.progress).addClassElement(t.CSS.progress.striped).addClassElement(t.CSS.progress.active).addChildAfter(new t.Element("div").addClassElement(t.CSS.progress.bar).addClassElement(this._skin).addStyleElement("width","100%").getElement()).getElement()).getElement()},updateProgress:function(e){var i=document.getElementById(this._id),n=i.querySelector("."+t.CSS.progress.bar);return n.style.width=e+"%",this},setProgress:function(){return this.beforeHTML("body"),this},removeProgress:function(e){var i=document.getElementById(t.api.empty(e,this._id));return i&&i.remove(),this},getElement:function(){return this._buildProgress()},toHTML:function(){return this._buildProgress().outerHTML},appendHTML:function(e){return new t.dom(e).append(this.getElement()),this},beforeHTML:function(e){return new t.dom(e).before(this.getElement()),this}}}(window.ui||{}),function(t){"use strict";t.Ajax=function(e){this._xhr=new XMLHttpRequest,this._callback=[],this._params={},this._progress=new t.Progress(null),this._progressLine=null},t.Ajax.prototype={_method:t.Config.defaultMethodAjax,_async:!0,_skinProgress:"info",setSkin:function(t){return this._skinProgress=t,this},setUrl:function(t){return this._url=t,this},setMethod:function(t){return this._method=t,this},setParams:function(t){return this._params=t,this},addParam:function(t,e){return this._params[t]=e,this},asyncOff:function(){return this._async=!1,this},addCallbackFunction:function(t){return this._callback.push(t),this},_parseParams:function(){return"data="+JSON.stringify(this._params)},progress:function(){this._progressLine=this._progress.setSkin(this._skinProgress).setProgress();var t=this;this._xhr.upload.onprogress=function(e){var i=e.loaded/e.total*100/2;if(t._progressLine.updateProgress(i),e.total==e.loaded){var n=i;t._xhr.onprogress=function(e){e.lengthComputable&&(n=i+e.loaded/e.total*100/2,t._progressLine.updateProgress(i+n/2))}}}},send:function(){var t=this._parseParams();"GET"==this._method&&(this._url+="?"+t),this._xhr.open(this._method,this._url,this._async),this._xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this._xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),"POST"==this._method?this._xhr.send(t):this._xhr.send(t),this.progress();var e=this;return this._xhr.onreadystatechange=function(){if(4===this.readyState&&200===this.status){for(var t in e._callback)e._callback[t](this.responseText,this);e._progressLine&&e._progressLine.removeProgress(null)}else 4===this.readyState&&200!==this.status&&(console.info(this.status+": "+this.statusText),e._progressLine&&e._progressLine.removeProgress(null))},this}}}(window.ui||{}),function(t){"use strict";t.FormData=function(e,i){this._idForm=e,this._elements=document.getElementById(e).elements,this.data={},this.errorField=[],this._locale=t.api.empty(i,t.Config.lbl[t.Config.locale]),this._lbl=t.api.existProperty(t.Config.lbl,this._locale,t.Config.lbl[t.Config.locale])},t.FormData.prototype={check:!1,checkReq:function(){return this.check=!0,this},validationField:function(e){var i=!0;if(e.required||e.classList.contains(t.CSS.requiredClass)){var n=t.api.findParent(e,"."+t.CSS.validateFieldBlockClass),s=n.querySelector("."+t.CSS.validateErrorClass),l=t.CSS.prefixClass.field+"-"+t.CSS.skinClass.default.error;e.parentNode.classList.remove(l),s.innerHTML="","checkbox"!==e.type&&"radio"!==e.type||e.checked?""==e.value&&(i=!1,s.innerHTML="<br/>"+this._lbl.required,e.parentNode.classList.add(l)):(i=!1,s.innerHTML="<br/>"+this._lbl.required,e.parentNode.classList.add(l))}return i},getData:function(){var e={};for(var i in this._elements){var n=this._elements.item(i);""==n.name||isNaN(Number(i))||(this.check===!1&&this.validationField(n)===!1&&"radio"!==n.type&&this.errorField.push(n.name),"checkbox"===n.type?n.checked?t.api.buildObject(this.data,n.name,t.Config.checkboxValue.checked,0):t.api.buildObject(this.data,n.name,t.Config.checkboxValue.nochecked,0):"radio"===n.type?(e.hasOwnProperty(n.name)?e[n.name].push(n.checked):e[n.name]=[n.checked],n.checked&&t.api.buildObject(this.data,n.name,n.value,0)):t.api.buildObject(this.data,n.name,n.value,0))}if(this.check===!1)for(var s in e){var l=0;for(var r in e[s])1==e[s][r]&&l++;if(0==l)n=document.querySelector('input[name="'+s+'"]'),this.validationField(n)===!1&&this.errorField.push(n.name);else{n=document.querySelectorAll('input[name="'+s+'"]');for(var a in n)n[a].checked&&this.validationField(n[a])}}return{data:this.data,error:this.errorField}},getFormElements:function(){return this._elements}}}(window.ui||{}),function(t){"use strict";var e="_ffText",i="_ffPassword",n="_ffTextarea",s="_ffDate",l="_ffSelect",r="_ffCheckbox",a="_ffRadio",o="_ffReadonly",d="object_name",h="parent_title",u="block_rows",m="block_fields",c="data-last-row",_="data-object",p="data-name-field",f="btn_add",g="btn_del",b="record_id",C="row-fields",E="block-field",y="data-json-form-pr",v="data-json-form-ch",k=(new Date).getTime();t.HtmlFields=function(){this._settings={},this.widthCaption=null,this.maxHeightFields=null,this.heightFields=null,this.formatDate=t.Config.formatDateUser,this.checkboxText=t.Config.checkboxText},t.HtmlFields.prototype={_ffReadonly:function(e,n,l){var a=t.api.existProperty(l,"list",!1),o=t.api.setValue(e,n,l.defValue);a!==!1&&(e=t.api.existProperty(a,o,null)),l.type===s?e=new t.FormatDate(o,this.formatDate).getDate():l.type===r?e=t.api.existProperty(this.checkboxText,o,null):l.type===i&&(e=t.Config.valuePassword);var d=t.api.existProperty(l,"caption",null);return new t.FFReadOnly(e,n,d).setWidthCaption(this.widthCaption).setMaxHeight(t.api.existProperty(l,"height",this.maxHeightFields)).getElement()},_ffText:function(e,i,n){var s=t.api.existProperty(n,"caption",null);return e=t.api.setValue(e,i,n.defValue),new t.FFText(e,n.setname,s).setRequired(t.api.existProperty(n,"required",!1)).setWidthCaption(this.widthCaption).getElement()},_ffPassword:function(e,i,n){var s=t.api.existProperty(n,"caption",null);return e=t.api.setValue(e,i,n.defValue),new t.FFPassword(e,n.setname,s).setRequired(t.api.existProperty(n,"required",!1)).setWidthCaption(this.widthCaption).getElement()},_ffTextarea:function(e,i,n){var s=t.api.existProperty(n,"caption",null);return e=t.api.setValue(e,i,n.defValue),new t.FFTextarea(e,n.setname,s).setRequired(t.api.existProperty(n,"required",!1)).setHeight(t.api.existProperty(n,"height",this.maxHeightFields)).setWidthCaption(this.widthCaption).setResize("vertical").getElement()},_ffDate:function(e,i,n){var s=t.api.existProperty(n,"caption",null);return e=t.api.setValue(e,i,n.defValue),new t.FFDate(e,n.setname,s).setRequired(t.api.existProperty(n,"required",!1)).setWidthCaption(this.widthCaption).getElement()},_ffSelect:function(e,i,n){var s=t.api.existProperty(n,"caption",null),l=t.api.existProperty(n,"list",{});return e=t.api.setValue(e,i,n.defValue),new t.FFSelect(e,n.setname,s).setRequired(t.api.existProperty(n,"required",!1)).setWidthCaption(this.widthCaption).setList(l).getElement()},_ffCheckbox:function(e,i,n){var s=t.api.existProperty(n,"caption",null);return e=t.api.setValue(e,i,n.defValue),(new t.FFCheckbox).addCheckbox(e,n.setname,s,null).setRequired(t.api.existProperty(n,"required",!1)).setCaptionBlock("",this.widthCaption).setFieldsHorizontal().getElement()},_ffRadio:function(e,i,n){var s=t.api.existProperty(n,"caption",null),l=t.api.existProperty(n,"list",{});return e=t.api.setValue(e,i,n.defValue),new t.FFRadio(e,n.setname,l).setRequired(t.api.existProperty(n,"required",!1)).setCaptionBlock(s,this.widthCaption).setWidthCaptionItem(t.api.existProperty(n,"width",2)).setFieldsHorizontal().getElement()},_setParametersFields:function(e,i){var n=this._settings,s=n[u],l=Object.keys(s).length-1;s[l].hasOwnProperty(u)&&(n=s[l],s=s[l][u],l=Object.keys(s).length-1),s[l].hasOwnProperty(m)||(s[l][m]={}),i=t.api.empty(i,null),null!==t.api.empty(n[d],null)&&null!==i?e.object=n[d]:e.object=null,e.name=i;var r=s[l][m];return null===i&&(i=o+"_"+Object.keys(r).length),r[i]=e,!0},addReadOnlyField:function(t,e,i,n){var s={defValue:t,type:o,caption:i,height:n};return this._setParametersFields(s,e),this},addTextField:function(i,n,s,l){var r={defValue:i,type:e,caption:s,required:t.api.empty(l,!1)};return this._setParametersFields(r,n),this},addPasswordField:function(e,n,s,l){var r={defValue:e,type:i,caption:s,required:t.api.empty(l,!1)};return this._setParametersFields(r,n),this},addTextareaField:function(e,i,s,l,r){var a={defValue:e,type:n,caption:s,required:t.api.empty(l,!1),height:t.api.empty(r,null)};return this._setParametersFields(a,i),this},addDateField:function(e,i,n,l){var r={defValue:e,type:s,caption:n,required:t.api.empty(l,!1)};return this._setParametersFields(r,i),this},addSelectField:function(e,i,n,s,r){var a={defValue:e,type:l,caption:n,required:t.api.empty(r,!1),list:s};return this._setParametersFields(a,i),this},addCheckboxField:function(e,i,n,s){var l={defValue:e,type:r,caption:n,required:t.api.empty(s,!1)};return this._setParametersFields(l,i),this},addRadioField:function(e,i,n,s,l,r){var o={defValue:e,type:a,caption:n,required:t.api.empty(l,!1),list:s,width:r};return this._setParametersFields(o,i),this},setMaxHeightFields:function(t){return this.maxHeightFields=t,this},setWidthCaption:function(t){return this.widthCaption=t,this},setFormatDate:function(t){return this.formatDate=t,this},setCheckboxValuesRead:function(t){return"object"==typeof t&&(this.checkboxText=t),this}},t.Form=function(e,i){t.HtmlFields.apply(this,arguments),this._parentValues={},this._childrenValues={},this._childrenRecordId={},this._btnLeftTopForm=[],this._btnRightTopForm=[],this._btnLeftBottomForm=[],this._btnRightBottomForm=[],this._hideBtnForm={_btnSave:!1,_btnClear:!1,_btnRemove:!1,_btnBack:!1,_btnReload:!1,_btnList:!1},this._idForm=t.api.empty(e,k),k++,this._validation=!0,this._paddingRelateBlock="xs",this._fieldRecordForm="",this._titleForm=null,this._titleFormSmall=null,this._skinPanel="default",this._paddingPanels="xs",this._paddingChildrenPanel="sm",this._method=t.Config.defaultMethodForm,this._checkboxText=t.Config.checkboxText,this._urlBack=document.referrer,this._urlDel=null,this._urlActionForm=null,this._urlList=null,this._actions={removeParent:"remove",removeChildren:"remove"},this._readOnly=!1,this._locale=t.api.empty(i,t.Config.lbl[t.Config.locale]),this._lbl=t.api.existProperty(t.Config.lbl,this._locale,t.Config.lbl[t.Config.locale]),this._alertBlockId="alert-"+this._idForm,this._debug=!1},t.Form.prototype=Object.create(t.HtmlFields.prototype),t.Form.prototype.constructor=t.Form,t.Form.prototype.setSkin=function(t){return this._skinPanel=t,this},t.Form.prototype.setDebug=function(e){return this._debug=t.api.empty(e,!0),this},t.Form.prototype._addDefaultBtn=function(){null!==this._urlList&&this._hideBtnForm._btnList===!1&&this._btnRightTopForm.push({type:"button",name:"_list",leftIcon:"list",skin:"default",caption:this._lbl.btn_list,active:!1,onclick:"ui.api.reload('"+this._urlList+"');"}),this._hideBtnForm._btnBack===!1&&""!=this._urlBack&&this._urlBack!==window.location.href&&this._btnLeftTopForm.push({type:"button",name:"_btnBack",leftIcon:"share-alt",caption:this._lbl.btn_back,active:!1,onclick:"window.location.href = '"+this._urlBack+"'"}),this._hideBtnForm._btnReload===!1&&this._btnLeftTopForm.push({type:"button",name:"_reloadPage",leftIcon:"repeat",active:!1,onclick:"ui.api.reload();"}),this._hideBtnForm._btnSave===!1&&this._readOnly===!1&&this._btnRightBottomForm.push({type:"button",name:"_btnSave",leftIcon:"save",skin:"default",active:!1,caption:this._lbl.btn_save,onclick:"new ui.Form('"+this._idForm+"', '"+this._locale+"')._save();"}),this._hideBtnForm._btnClear===!1&&this._readOnly===!1&&this._btnRightBottomForm.push({type:"button",name:"_btnClear",leftIcon:"refresh",skin:"default",caption:this._lbl.btn_clear,active:!1,onclick:"new ui.Form('"+this._idForm+"', '"+this._locale+"')._reset();"}),this._hideBtnForm._btnRemove===!1&&this._parentValues.hasOwnProperty(this._fieldRecordForm)&&null!==this._urlDel&&this._btnRightBottomForm.push({type:"button",name:"_btnRemove",leftIcon:"trash",skin:"danger",active:!0,caption:this._lbl.btn_remove,onclick:"new ui.Form('"+this._idForm+"', '"+this._locale+"')._removeParent();"})},t.Form.prototype.addButton=function(e,i,n,s,l,r,a,o){var d={1:"_btnLeftTopForm",2:"_btnRightTopForm",3:"_btnLeftBottomForm",4:"_btnRightBottomForm"};if(t.api.existProperty(d,e,!1)){var h="submit"==i?'new ui.Form("'+this._idForm+'", "'+this._locale+'").sendForm(); ':"";this[d[e]].push({type:t.api.empty(i,null),name:t.api.empty(n,null),leftIcon:t.api.empty(s,null),caption:t.api.empty(l,null),skin:t.api.empty(a,null),onclick:h+t.api.empty(r,null),active:o})}return this},t.Form.prototype.sendForm=function(){var e=new t.FormData(this._idForm,this._locale).getData();return 0===e.error.length&&document.getElementById(this._idForm).submit(),!1},t.Form.prototype._blockHiddenPr=function(){var e={_urlActionForm:this._urlActionForm,_urlDel:this._urlDel,_fieldRecordForm:this._fieldRecordForm,_idRecord:t.api.existProperty(this._parentValues,this._fieldRecordForm,null),_debug:this._debug,_actions:{removeParent:this._actions.removeParent}};return new t.Element("div").setAttrElement("hidden",!0).addClassElement(t.CSS.formBlockHiddenClass).addChildAfter(new t.Element("div").setIdElement(y,null).setAttrElement(y,JSON.stringify(e)).getElement()).getElement()},t.Form.prototype._blockHiddenCh=function(e){var i={_objectName:e.object,_fieldName:e.record_name,_fieldRecordForm:e.record_field,_idRecord:e.record,_idForm:this._idForm,_debug:this._debug,_actions:{removeChildren:this._actions.removeChildren}};return new t.Element("div").setAttrElement("hidden",!0).addClassElement(t.CSS.formBlockHiddenClass).addChildAfter(new t.Element("div").addClassElement(v).setAttrElement(v,JSON.stringify(i)).getElement()).getElement()},t.Form.prototype._buildBlockRows=function(e,i){var n=e[d],s=e[h],l=new t.Element("div").addClassElement(t.CSS.panelClass.panel).setSkinElement("panel",this._skinPanel);t.api.empty(s,!1)&&l.addChildBefore(new t.Element("div").addClassElement(t.CSS.panelClass.panelHead).addChildBefore(new t.Element("h3").addClassElement(t.CSS.panelClass.panelTitle).setContentElement(s).getElement()).getElement());var r=new t.Element("div").addClassElement(t.CSS.panelClass.panelBody),a=null;if(i===!0)r.addChildBefore(this._buildRow(this._parentValues,e,null));else{if(this._childrenValues.hasOwnProperty(n)){var o=this._childrenValues[n],u=Object.keys(o).length;for(a in o)r.setAttrElement(c,u).setAttrElement(_,n).addChildAfter(this._buildRow(o[a],e,a))}null===a&&r.addChildBefore(this._buildRow({},e,0))}return null===a&&this._readOnly===!0&&i===!1?new t.Element("div").getElement():l.setPaddingElement(this._paddingPanels).addChildAfter(r.getElement()).getElement()},t.Form.prototype._buildRow=function(e,i,n){var s=i[u],l=i[d],r=new t.Element("div").addClassElement(C);if(this._childrenRecordId.hasOwnProperty(l)){var a=this._childrenRecordId[l],o={object:l,name:a},h=t.api.setValue(e,a);this._setNameField(n,o),r.addChildAfter(this._blockHiddenCh({object:l,record:h,record_name:o.setname,record_field:a}))}for(var c in s)s[c].hasOwnProperty(u)?r.addChildAfter(new t.Element("div").setPaddingElement(this._paddingChildrenPanel).addChildBefore(this._buildBlockRows(s[c],!1)).getElement()):r.addChildAfter(new t.Element("div").addClassElement(t.CSS.newLine).setPaddingElement(this._paddingRelateBlock).addChildAfter(this._buildFields(e,l,s[c][m],n,c)).getElement());return n&&r.addChildAfter(new t.Element("hr").getElement()),r.getElement()},t.Form.prototype._buildFields=function(e,i,n,s,l){var r=new t.Element("div");for(var a in n){var d=n[a];if(d.hasOwnProperty("type")){var h=d.type;this._readOnly!==!1&&(h=o),this._setNameField(s,d);var u=this[h](e,a,d),m=null===s?12:10,c=Math.round(m/Object.keys(n).length);r.addChildAfter(new t.Element("div").setAttrElement(p,d.name).addClassElement(E).setWidthElement(c).addChildAfter(u).getElement())}}if(null!==s&&0==l&&this._readOnly===!1){var _=(new t.FFButton).setGroup("toolbar").setOnClick("new ui.Form(null, '"+this._locale+"')._addChildren(this);").setClass(f).addButton(null,null,null,null,!1,"plus").setOnClick("new ui.Form(null, '"+this._locale+"')._removeChildren(this);").setClass(g).addButton(null,"del_record",null,null,!1,"minus").setSize("sm").setPositionBlock("right");0==Object.keys(e).length&&_.hide("del_record"),r.addChildAfter(_.getElement())}return r.getElement()},t.Form.prototype._setNameField=function(t,e){null!==t?e.setname=e.object+"["+t+"]["+e.name+"]":null!==e.object?e.setname=e.object+"["+e.name+"]":e.setname=e.name},t.Form.prototype._buildForm=function(){var e=new t.Element("form").setIdElement(this._idForm,null).setAttrElement("method",this._method).addChildBefore(this._blockHiddenPr()).addChildAfter(this._buildBlockRows(this._settings,!0)).setAttrElement("action",this._urlActionForm);this._addDefaultBtn();var i=new t.Page(null).setTitle(this._titleForm,this._titleFormSmall,null);return(this._btnLeftTopForm.length>0||this._btnRightTopForm.length>0)&&i.setHead(this._buildRowButtons(this._btnLeftTopForm,this._btnRightTopForm)),i.setBody(e.toHTML()),(this._btnLeftBottomForm.length>0||this._btnRightBottomForm.length>0)&&i.setFooter(this._buildRowButtons(this._btnLeftBottomForm,this._btnRightBottomForm)),i.getElement()},t.Form.prototype._buildRowButtons=function(e,i){return new t.Element("div").addClassElement(t.CSS.newLine).addChildAfter(new t.Element("div").setWidthElement(6).addChildAfter((new t.FFButton).addButtonList(e).setPositionBlock("left").setGroup("toolbar").getElement()).getElement()).addChildAfter(new t.Element("div").setWidthElement(6).addChildAfter((new t.FFButton).addButtonList(i).setPositionBlock("right").setGroup("toolbar").getElement()).getElement()).toHTML()},t.Form.prototype._save=function(){var e=document.body.querySelector("#"+this._idForm+" #"+y),i=e.getAttribute(y),n=JSON.parse(i),s=new t.FormData(this._idForm,this._locale).getData(),l=t.api.existProperty(t.Config.lbl,this._locale,t.Config.locale);if(0===s.error.length){var r=this;n._debug?console.log(n,s):null,(new t.Ajax).setUrl(n._urlActionForm).setParams(s.data).addParam(n._fieldRecordForm,n._idRecord).addParam("action",n._idRecord>0?"edit":"save").addCallbackFunction(function(i){n._debug?console.log(i):null;try{var s=JSON.parse(i);s.record>0?(n._idRecord=s.record,e.setAttribute(y,JSON.stringify(n)),new t.Alert(r._alertBlockId).addSuccess(l.success,l.successSave,null).appendHTML("#"+r._idForm,!0)):"error"in s&&new t.Alert(r._alertBlockId).addError(l.error,s.error,null).appendHTML("#"+r._idForm,!0)}catch(e){new t.Alert(r._alertBlockId).addError(l.error,l.errorAjaxResponse,null).appendHTML("#"+r._idForm,!0)}}).send()}else new t.Alert(this._alertBlockId).addError(l.error,l.requiredAlert,null).appendHTML("#"+this._idForm,!0);return!0},t.Form.prototype._removeParent=function(){var e=document.body.querySelector("#"+this._idForm+" #"+y),i=e.getAttribute(y),n=JSON.parse(i);if(""!=n._idRecord&&""!=n._urlDel&&""!=n._fieldRecordForm){var s=t.api.existProperty(t.Config.lbl,this._locale,t.Config.locale),l={id:[n._idRecord],action:n._actions.removeParent},r=this;n._debug?console.log(n,l):null,(new t.Ajax).setUrl(n._urlDel).setParams(l).addCallbackFunction(function(e){n._debug?console.log(e):null;try{var i=JSON.parse(e);"object"==typeof i&&t.api.existProperty(i,"error",null)?new t.Alert(r._alertBlockId).addError(s.error,i.error,null).appendHTML("#"+r._idForm,!0):t.api.reload(null)}catch(e){new t.Alert(r._alertBlockId).addError(s.error,s.removingError,null).appendHTML("#"+r._idForm,!0)}}).send()}return!0},t.Form.prototype._removeChildren=function(e){var i=t.api.findParent(e,"."+C),n=i.querySelector("."+v),s=n.getAttribute(v),l=i.parentElement;try{var r=JSON.parse(s),a=document.body.querySelector("#"+r._idForm+" #"+y),o=JSON.parse(a.getAttribute(y)),d={};d[r._fieldRecordForm]=r._idRecord,d.object=r._objectName,r._debug?console.log(r,d):null,(new t.Ajax).setUrl(o._urlDel).setParams(d).addParam("action",r._actions.removeChildren).addCallbackFunction(function(t){r._debug?console.log(t):null}).send()}catch(t){}if(2==l.childElementCount){var h,u=l.childNodes;for(h in u)"object"==typeof u[h]&&t.api.hide(u[h].querySelector("."+g))}i.remove()},t.Form.prototype._addChildren=function(e){var i=t.api.findParent(e,"."+C),n=i.parentElement,s=n.children[0].querySelector("."+g);t.api.show(s);var l=i.cloneNode(!0),r=l.querySelector("."+v),a=r.getAttribute(v),o=JSON.parse(a);for(var d in o)o[d]=null;r.setAttribute(v,JSON.stringify(o));var h=l.querySelector("."+t.CSS.validateErrorClass);h.innerHTML="";var u=l.querySelector("."+b);null!==u&&t.api.findParent(u,"."+t.CSS.validateFieldBlockClass).remove();var m=l.querySelectorAll("input, textarea, select"),f=null,y=n.getAttribute(_),k=n.getAttribute(c);for(f in m)if("object"==typeof m[f]){var S=t.CSS.prefixClass.field+"-"+t.CSS.skinClass.default.error;m[f].parentElement.classList.remove(S);var w=t.api.findParent(m[f],"."+E);if(null!==w){var L=w.getAttribute(p);m[f].setAttribute("name",y+"["+k+"]["+L+"]"),w.querySelector("."+t.CSS.validateErrorClass).innerHTML=""}m[f].defaultValue="",m[f].value="",m[f].innerHTML=""}k++,n.setAttribute(c,k),i.parentElement.insertBefore(l,i.nextSibling)},t.Form.prototype._reset=function(){document.getElementById(this._idForm).reset(),new t.dom("."+this._alertBlockId).remove();var e=new t.FormData(this._idForm,this._locale).getFormElements();for(var i in e){var n=e.item(i);if(t.api.clear(n),""!=n.name&&!isNaN(Number(i))&&(n.required||n.classList.contains(t.CSS.requiredClass))){var s=t.api.findParent(n,"."+t.CSS.validateFieldBlockClass),l=s.querySelector("."+t.CSS.validateErrorClass),r=t.CSS.prefixClass.field+"-"+t.CSS.skinClass.default.error;n.parentNode.classList.remove(r),l.innerHTML=""}}return!0},t.Form.prototype.disableValidation=function(){return this._validation=!1,this},t.Form.prototype.hideBtnSave=function(e){return this._hideBtnForm._btnSave=t.api.empty(e,!0),this},t.Form.prototype.hideBtnClear=function(e){return this._hideBtnForm._btnClear=t.api.empty(e,!0),this},t.Form.prototype.hideBtnRemove=function(e){return this._hideBtnForm._btnRemove=t.api.empty(e,!0),this},t.Form.prototype.hideBtnBack=function(e){return this._hideBtnForm._btnBack=t.api.empty(e,!0),this},t.Form.prototype.hideBtnReload=function(e){return this._hideBtnForm._btnReload=t.api.empty(e,!0),this},t.Form.prototype.hideBtnList=function(e){return this._hideBtnForm._btnList=t.api.empty(e,!0),this},t.Form.prototype.newLineParent=function(){var t=this._settings;return t.hasOwnProperty(u)||(t[u]=[]),t[u].push({}),this},t.Form.prototype.newLineChildren=function(){var t=this._settings,e=Object.keys(t[u]).length-1,i=t[u][e];return i.hasOwnProperty(u)||(i[u]=[]),i[u].push({}),this},t.Form.prototype.setParentBlock=function(e,i,n){var s={};return s[h]=e,this._settings=s,this._fieldRecordForm=t.api.empty(i,"id"),this._parentValues=t.api.empty(n,{}),this},t.Form.prototype.addChildrenBlock=function(e,i,n,s){var l={};return l[h]=e,l[d]=i,l[u]=[],this._settings.hasOwnProperty(u)||(this._settings[u]=[]),this._settings[u].push(l),this._childrenRecordId[i]=n,this._childrenValues[i]=t.api.empty(s,[]),this},t.Form.prototype.setPaddingRelateBlock=function(t){return this._paddingRelateBlock=t,this},t.Form.prototype.setTitle=function(e,i){return this._titleForm=t.api.empty(e,null),this._titleFormSmall=t.api.empty(i,null),this},t.Form.prototype.setMethod=function(e){return this._method=t.api.empty(e,t.Config.defaultMethodForm),this},t.Form.prototype.setUrlBack=function(t){return this._urlBack=t,this},t.Form.prototype.setUrlActionForm=function(t){return this._urlActionForm=t,this},t.Form.prototype.setUrtDel=function(t){return this._urlDel=t,this},t.Form.prototype.setUrtList=function(t){return this._urlList=t,this},t.Form.prototype.setFormReadOnly=function(e){return this._readOnly=t.api.empty(e,!0),this},t.Form.prototype.getElement=function(){return this._buildForm()},t.Form.prototype.toHTML=function(){return this._buildForm().outerHTML},t.Form.prototype.appendHTML=function(e){return new t.dom(e).append(this.getElement()),this}}(window.ui||{}),function(t){"use strict";var e=(new Date).getTime();t.Page=function(i){this._idPage=t.api.empty(i,"page-"+e)},t.Page.prototype={_title:null,_titleSmall:null,_titleSize:3,_header:null,_body:null,_footer:null,setTitle:function(e,i,n){return this._title=t.api.empty(e,null),this._titleSmall=t.api.empty(i,null),"number"==typeof n&&(this._titleSize=n),this},setHead:function(t){return this._header=t,this},setBody:function(t){return this._body=t,this},setFooter:function(t){return this._footer=t,this},_buildTitle:function(){return new t.Element("div").addChildAfter(new t.Element("h"+this._titleSize).setContentElement(t.api.empty(this._title,"")+" ").addChildAfter(new t.Element("small").setContentElement(this._titleSmall).getElement()).getElement()).getElement()},_buildHeader:function(){return new t.Element("div").addClassElement(t.CSS.alignClass.block.clear).setContentElement(this._header).getElement()},_buildBody:function(){return new t.Element("div").addClassElement(t.CSS.alignClass.block.clear).setContentElement(this._body).getElement()},_buildFooter:function(){return new t.Element("div").setContentElement(this._footer).getElement()},_buildMainBlock:function(){var e=new t.Element("div").setIdElement(this._idPage,null).addClassElement(t.CSS.alignClass.block.clear).addClassElement(t.CSS.page.main);return null===this._title&&null===this._titleSmall||e.addChildAfter(this._buildTitle()),null!==this._header&&e.addChildAfter(this._buildHeader()),null!==this._body&&e.addChildAfter(this._buildBody()),null!==this._footer&&e.addChildAfter(this._buildFooter()),e.getElement()},getElement:function(){return this._buildMainBlock()},toHTML:function(){return this._buildMainBlock().outerHTML},appendHTML:function(e){return new t.dom(e).append(this.getElement()),this}}}(window.ui||{}),function(t){"use strict";var e=(new Date).getTime(),i="data-json-pagination";t.Pagination=function(i){this._id=t.api.empty(i,"pagination-"+e),e++},t.Pagination.prototype={_linkParam:"?page=",_nameNext:"&raquo;",_namePrevious:"&laquo;",_nameNextTwo:"&raquo;&raquo;",_namePreviousTwo:"&laquo;&laquo;",_maxItem:3,_currentPage:1,_size:t.CSS.pagination.size.sm,_skin:null,_type:t.CSS.pagination.type.default,_position:t.CSS.alignClass.block.right,_link:null,_callback:"",_countPages:null,_ajaxUrl:!1,_getFirstItem:function(t){var e=null;return 1==this._currentPage&&(e=!0),this._getItem(1,this._namePreviousTwo,e,null,t)},_getLastItem:function(t){var e=null;return this._currentPage==this._countPages&&(e=!0),this._getItem(this._countPages,this._nameNextTwo,e,null,t)},_getPrevItem:function(t){var e=this._currentPage>1?this._currentPage-1:this._countPages;return this._getItem(e,this._namePrevious,null,null,t)},_getNextItem:function(t){var e=this._currentPage<this._countPages?this._currentPage+1:1;return this._getItem(e,this._nameNext,null,null,t)},_getItem:function(e,i,n,s,l){n=n?t.CSS.pagination.item.disabled:null,s=s?t.CSS.pagination.item.active:null,l="l"===l?t.CSS.pagination.side.left:"r"===l?t.CSS.pagination.side.rirht:null;var r=null,a=null;return null==s&&null==n&&(a=this._callback+"(this, "+e+'); new ui.Pagination("'+this._id+'")._rebuild('+e+", "+this._countPages+");"),0==this._ajaxUrl&&(r=t.api.empty(this._link,"")+t.api.empty(this._linkParam,"")+e),new t.Element("li").addClassElement(s).addClassElement(n).addClassElement(l).addChildAfter(new t.Element("a").setAttrElement("href",r).setAttrElement("onclick",a).setContentElement(i).getElement()).getElement()},_getItems:function(t){var e=1,i=this._currentPage-this._maxItem-1;i>0&&(e=this._currentPage-this._maxItem,i-5>0&&(i-=5),t.addChildAfter(this._getItem(i,"...",null,null,null)));var n=this._countPages,s=this._currentPage+this._maxItem+1;this._countPages-s>0&&(n=this._currentPage+this._maxItem);for(var l=e;l<=n;l++){var r=null;l==this._currentPage&&(r=!0),t.addChildAfter(this._getItem(l,l,null,r,null))}this._countPages-s>0&&(this._countPages-(s+5)>0&&(s+=5),t.addChildAfter(this._getItem(s,"...",null,null,null)))},_buildPagination:function(){var e=new t.Element("ul").addClassElement(this._type).setSkinElement("text",this._skin).addClassElement(this._size).addClassElement(this._position);return this._countPages>2*(this._maxItem+1)&&e.addChildAfter(this._getFirstItem(null)),e.addChildAfter(this._getPrevItem("l")),this._getItems(e),e.addChildAfter(this._getNextItem("r")),this._countPages>2*(this._maxItem+1)&&e.addChildAfter(this._getLastItem(null)),e.getElement()},_buildBlock:function(){var e=new t.Element("div",(!0));return e.addClassElement(t.CSS.alignClass.block.clear).setIdElement(this._id,null).setAttrElement(i,JSON.stringify(this)).addChildAfter(this._buildPagination()),e.getElement()},_rebuild:function(t,e){var n=document.body.querySelector("#"+this._id),s=n.getAttribute(i),l=JSON.parse(s);for(var r in l)this[r]=l[r];this._currentPage=t,this._countPages=e,n.parentNode.insertBefore(this._buildBlock(),n),n.remove()},setAjax:function(){return this._ajaxUrl=!0,this},setLink:function(t){return this._link=t,this},setLinkParam:function(t){return this._linkParam=t,this},setPosition:function(e){return this._position=t.api.existProperty(t.CSS.alignClass.block,e,null),this},setMaxItem:function(t){return this._maxItem=t,this},setCountPages:function(t){return this._countPages=t,this},setCurrentPage:function(e){
return this._currentPage=t.api.empty(e,this._currentPage),this},setSize:function(e){return this._size=t.api.existProperty(t.CSS.pagination.size,e,null),this},setSkin:function(t){return this._skin=t,this},setType:function(e){return this._type=t.api.existProperty(t.CSS.pagination.type,null),this},setNameSwitches:function(e,i){return this._namePrevious=t.api.empty(e,this._namePrevious),this._namePreviousTwo=t.api.empty(i,this._namePreviousTwo),this},setNameNext:function(e,i){return this._nameNext=t.api.empty(e,this._nameNext),this._nameNextTwo=t.api.empty(i,this._nameNextTwo),this},getElement:function(){return this._buildBlock()},setCallbackFunction:function(t){return this._callback=t,this},toHTML:function(){return this._buildBlock().outerHTML},appendHTML:function(e){return new t.dom(e).append(this.getElement()),this},beforeHTML:function(e){return new t.dom(e).before(this.getElement()),this}}}(window.ui||{}),function(t){"use strict";var e="ASC",i="DESC";t.SortTable=function(t){this.element=t},t.SortTable.prototype={_contentClass:"sort-content",_dataSort:"data-sort",_activeColumn:"data-sort-active",_skinIcon:"muted",_up:"chevron-up",_down:"chevron-down",setSkinIcon:function(t){return this._skinIcon=t,this},setIcon:function(e,i){return this._up=t.api.empty(e,"chevron-up"),this._down=t.api.empty(i,"chevron-down"),this},setClassContent:function(t){return this._classContent=t,this},updateSort:function(t){var e=document.body.querySelector(t+" th["+this._activeColumn+'="true"]');e&&(e.click(),e.click())},sort:function(n){for(var s=t.api.findParent(this.element,"table"),l=s.querySelector("tbody"),r=(l.querySelectorAll("tr"),[]),a=0;a<l.rows.length;a++){var o=l.rows[a].getElementsByTagName("td").item(n),d=o.querySelector("."+this._contentClass),h=d?d.innerHTML:o.innerHTML;r[a]=[],r[a][0]=h,r[a][1]=l.rows[a]}var u=this.element.hasAttribute(this._dataSort),m=e;for(u?(m=this.element.getAttribute(this._dataSort),m==e?(this.element.setAttribute(this._dataSort,i),this._setIcon(this._down)):(this.element.setAttribute(this._dataSort,e),this._setIcon(this._up))):(this.element.setAttribute(this._dataSort,i),this._setIcon(this._down)),t.api.isNumeric(r[0][0])?m==e?r.sort(this._desc):r.sort(this._asc):(r.sort(),m==e&&r.reverse()),a=0;a<r.length;a++)l.appendChild(r[a][1])},_setIcon:function(e){var i,n,s=this.element.parentNode.parentNode,l=s.querySelectorAll("th, td");for(n in l)"object"==typeof l[n]&&l[n].setAttribute(this._activeColumn,"false");this.element.setAttribute(this._activeColumn,"true");var r=s.querySelectorAll("."+t.CSS.iconClass);for(i in r)"object"==typeof r[i]&&r[i].remove();var a=new t.Element("span").setSkinElement("text",this._skinIcon).setIconElement(e).toHTML();this.element.innerHTML=a+this.element.innerHTML},_asc:function(t,e){return t[0]-e[0]},_desc:function(t,e){return e[0]-t[0]}}}(window.ui||{}),function(t){"use strict";var e=(new Date).getTime(),i="thead",n="tbody",s="tfoot",l="data-record",r="data-action",a="choose-record-id",o="choose_records",d="data-json-table",h="sort-content";t.List=function(n,s,l){t.Form.apply(this,["search-"+s,l]),this._fieldRecordList=t.api.empty(n,"id"),this._btnRightBottomList=[],this._btnLeftBottomList=[],this._btnLeftTopList=[],this._btnRightTopList=[],this._btnLeftTopTable=[],this._btnRightTopTable=[],this._separatorLink="/",this._hideBtnList={_btnBack:!1,_btnAdd:!1,_btnClear:!1,_btnRemove:!1,_btnSearch:!1,_btnReload:!1,_btnTrash:!1},this._settingsList={thead:[],tbody:[],tfoot:[]},this._lastSetting={block:i,row:0,cell:0},this._column={},this._parentRecords=[],this._titleList=null,this._titleListSmall=null,this._skin=null,this._typeTable=null,this._numCellTitle="№",this._hideColumnNumber=!1,this._hideColumnCheckbox=!1,this._rowNum=1,this._maxRow=50,this._currentPage=1,this._countPages=1,this._dataAjaxPagination={action:"pagination",url:window.location.href},this._dataAjaxSearch={action:"search",url:window.location.href},this._dataAjaxRemove={action:"remove",url:window.location.href},this._urlAddAndEdit=null,this._urlTrash=window.location.href,this._urlBack=document.referrer,this.urlNoImg=t.Config.noimg,this._idList=t.api.empty(s,"table-"+e),this._locale=t.api.empty(l,t.Config.lbl[t.Config.locale]),this._lbl=t.api.existProperty(t.Config.lbl,this._locale,t.Config.lbl[t.Config.locale]),e++,this._columnType={number:function(e){return new t.Element("div").addClassElement("sort-content").setPsitionElement("right").setContentElement(e.value).toHTML()},text:function(e){return new t.Element("div").addStyleElement("maxHeight",e.height).addStyleElement("overflow","auto").addClassElement("sort-content").setContentElement(e.value).toHTML()},link:function(e){var i=null!=e.record?e.separator+e.record:"";return new t.Element("div").addChildAfter(new t.Element("a").addClassElement("sort-content").setUrlElement(e.href+i).setContentElement(e.value).getElement()).toHTML()},image:function(e){return new t.Element("div").addStyleElement("maxHeight",e.height).addChildAfter(new t.Element("a").addClassElement("thumbnail").setUrlElement(e.href).addChildAfter(new t.Element("img").addClassElement("sort-content").addStyleElement("maxHeight",e.height).setAttrElement("alt",e.alt).setUrlElement(t.api.empty(e.value,e.hrefNoImg)).getElement()).getElement()).toHTML()},code:function(e){return new t.Element("code").addStyleElement("maxHeight",e.height).addStyleElement("overflow","auto").addClassElement("sort-content").setContentElement(t.api.escapeHtml(e.value)).toHTML()},html:function(e){return new t.Element("div").addStyleElement("maxHeight",e.height).addStyleElement("overflow","auto").addClassElement("sort-content").setContentElement(t.api.escapeHtml(e.value)).toHTML()}},this._maxHeightRow="150px"},t.List.prototype=Object.create(t.Form.prototype),t.List.prototype.constructor=t.List,t.List.prototype.newLineSearchFields=function(){return t.Form.prototype.newLineParent.apply(this,arguments),this},t.List.prototype.setMaxHeightRow=function(e){return"number"==typeof e&&(e+="px"),this._maxHeightRow=t.api.empty(e,null),this},t.List.prototype.setMaxRow=function(t){return this._maxRow=t,this},t.List.prototype.setSeparatorParamLink=function(t){return this._separatorLink=t,this},t.List.prototype._btnDefault=function(){this._hideBtnList._btnBack===!1&&""!=this._urlBack&&this._urlBack!==window.location.href&&this._btnLeftTopList.push({type:"button",name:"_btnBack",leftIcon:"share-alt",caption:this._lbl.btn_back,active:!1,onclick:"ui.api.reload('"+this._urlBack+"');"}),this._hideBtnList._btnReload===!1&&this._btnLeftTopList.push({type:"button",name:"_reloadPage",leftIcon:"repeat",active:!1,onclick:"ui.api.reload();"}),null!==this._urlAddAndEdit&&this._hideBtnList._btnAdd===!1&&this._btnRightTopList.push({type:"button",name:"_add",leftIcon:"new-window",skin:"default",caption:this._lbl.btn_add,active:!1,onclick:"ui.api.reload('"+this._urlAddAndEdit+"');"}),null!==this._urlTrash&&this._hideBtnList._btnTrash===!1&&this._btnRightTopList.push({type:"button",name:"_trash",leftIcon:"trash",caption:this._lbl.btn_trash,active:!1,onclick:"ui.api.reload('"+this._urlTrash+"');"}),console.log(this._hideBtnList._btnSearch),this._hideBtnList._btnSearch===!1&&this._btnRightTopTable.push({type:"button",name:"_btnSave",leftIcon:"search",skin:null,active:!1,caption:this._lbl.btn_search,onclick:"new ui.List('"+this._fieldRecordList+"', '"+this._idList+"', '"+this._locale+"')._search('"+this._idForm+"');"}),this._hideBtnList._btnClear===!1&&this._btnRightTopTable.push({type:"button",name:"_btnClear",leftIcon:"refresh",skin:null,caption:this._lbl.btn_clear,active:!1,onclick:"new ui.Form('"+this._idForm+"', '"+this._locale+"')._reset();"}),this._hideColumnCheckbox===!1&&this._hideBtnList._btnRemove===!1&&this._btnRightTopTable.push({type:"button",name:"_btnRemove",leftIcon:"remove",skin:"danger",active:!0,caption:this._lbl.btn_remove,onclick:"new ui.List('"+this._fieldRecordList+"', '"+this._idList+"', '"+this._locale+"')._remove();",disabled:!0})},t.List.prototype.addButton=function(e,i,n,s,l,r,a,o){var d={1:"_btnLeftTopList",2:"_btnRightTopList",3:"_btnLeftBottomList",4:"_btnRightBottomList",5:"_btnRightTopTable",6:"_btnLeftTopTable"};return t.api.existProperty(d,e,!1)&&this[d[e]].push({type:t.api.empty(i,null),name:t.api.empty(n,null),leftIcon:t.api.empty(s,null),caption:t.api.empty(l,null),skin:t.api.empty(a,null),onclick:t.api.empty(r,null),active:o}),this},t.List.prototype._buildTable=function(){var e=new t.Element("div");return(this._btnLeftTopTable.length>0||this._btnRightTopTable.length>0)&&e.addChildAfter(this._buildRowButtons(this._btnLeftTopTable,this._btnRightTopTable).getElement()),e.addChildAfter(new t.Element("div").addClassElement(t.CSS.tableClass.responsive).addChildAfter(new t.Element("table").addClassElement(t.CSS.tableClass.table).addClassElement(t.CSS.tableClass.hover).addClassElement(t.CSS.tableClass.striped).addClassElement(this._typeTable).addChildAfter(this._buildBlock(i)).addChildAfter(this._buildBlock(n)).addChildAfter(this._buildBlock(s)).getElement()).getElement()),e.getElement()},t.List.prototype._getColumnType=function(e,i,n){var s=t.api.existProperty(this._column,i,!1);if(s in this._columnType){var l={record:n,value:e,href:this._urlAddAndEdit,alt:this._lbl.noimg,hrefNoImg:this.urlNoImg,height:this._maxHeightRow,separator:this._separatorLink};e=this._columnType[s].call(this,l)}return e},t.List.prototype._contentCell=function(e,i,s){var l=t.api.existProperty(e,"content",e);return i==n?this._getColumnType(l,s,null):l},t.List.prototype._columnNumber=function(e,l,r,a){if(!this._hideColumnNumber){var o=new t.Element(r).addClassElement(t.CSS.tableClass.rowNum);if(l==i&&0==a){var d=Object.keys(this._settingsList.thead).length;e.addChildAfter(o.setContentElement(this._numCellTitle).setAttrElement("onclick",'new ui.SortTable(this).setSkinIcon("'+this._skin+'").sort(0);').setAttrElement("rowspan",d).getElement())}else if(l==n){var u=t.api.existProperty(this._settingsList.tbody[a],this._fieldRecordList,null);e.addChildAfter(o.addChildAfter(new t.Element("div").addClassElement(h).setContentElement(this._rowNum).setAttrElement("title",u).getElement()).addChildAfter(new t.Element("div").getElement()).getElement())}else l==s&&e.addChildAfter(o.setContentElement(null).getElement())}},t.List.prototype._columnCheckbox=function(e,d,h,u){if(!this._hideColumnCheckbox){var m=new t.Element(h).addClassElement(t.CSS.tableClass.rowNum),c="new ui.List('"+this._fieldRecordList+"', '"+this._idList+"', '"+this._locale+"')._choose(this);";if(d==i&&0==u){var _=Object.keys(this._settingsList.thead).length;e.addChildAfter(m.addChildAfter(new t.FFCheckbox("simple").setAttr(r,o).addCheckbox(null,o,null,c).getElement()).setAttrElement("rowspan",_).getElement())}else if(d==n){var p=t.api.existProperty(this._settingsList.tbody[u],this._fieldRecordList,null);e.addChildAfter(m.addChildAfter(new t.FFCheckbox("simple").setAttr(l,p).setAttr(r,a).setDefaultValues("on","off").addCheckbox(p,this._fieldRecordList+"["+u+"]",null,c).getElement()).getElement())}else d==s&&e.addChildAfter(m.setContentElement(null).getElement())}},t.List.prototype._replaceRows=function(e){var i=document.body,s=i.querySelector("#"+this._idList+" table"),l=i.querySelector("#"+this._idList+" table>tbody"),a=i.querySelector("#"+this._idList+" #"+d).getAttribute(d),h=JSON.parse(a);for(var u in h)this[u]=h[u];this._settingsList.tbody=e,s.insertBefore(this._buildBlock(n),l),l?l.remove():null;var m=document.body.querySelector("input["+r+'="'+o+'"]');m.checked?m.click():null,t.api.disabledElement(document.body.querySelector('button[name="_btnRemove"]'),!0)},t.List.prototype._choose=function(e){var i=e.getAttribute(r),n=document.body.querySelectorAll("#"+this._idList+" input["+r+'="'+a+'"]'),s=document.body.querySelector("#page-"+this._idList+' button[name="_btnRemove"]'),l=null,d=!1;if(i==o){0==n.length&&(d=!0);for(l in n)"object"==typeof n[l]&&(e.checked===!1?(d=!0,n[l].removeAttribute("checked"),n[l].checked=!1):(n[l].setAttribute("checked","checked"),n[l].checked=!0))}else if(i==a){var h=document.body.querySelector("#"+this._idList+" input["+r+'="'+o+'"]'),u=0;for(l in n)"object"==typeof n[l]&&n[l].checked===!0&&u++;e.checked===!1?(h.removeAttribute("checked"),h.checked=!1,d=0==u):n.length==u&&(h.setAttribute("checked","checked"),h.checked=!0)}t.api.disabledElement(s,d)},t.List.prototype._buildRows=function(e,s,l){var r=new t.Element("tr"),a=s==i?"th":"td";this._columnNumber(r,s,a,l),s==n?this._rowNum++:null;var o=null;if(s==n){for(o in this._column)if(e.hasOwnProperty(o)){var d=t.api.existProperty(e,this._fieldRecordList,null);r.addChildAfter(new t.Element(a).setContentElement(this._getColumnType(e[o],o,d)).getElement())}}else{var h=this._hideColumnNumber?0:1;for(o in e){var u=e[o],m=t.api.existProperty(u,"sort",!1)?'new ui.SortTable(this).setSkinIcon("'+this._skin+'").sort('+h+");":null;r.addChildAfter(new t.Element(a).setContentElement(this._contentCell(u,s,o)).setAttrElement("colspan",t.api.existProperty(u,"colspan",1)).setAttrElement("rowspan",t.api.existProperty(u,"rowspan",1)).setAttrElement("style",t.api.existProperty(u,"style",null)).setWidthElement(t.api.existProperty(u,"width",null)).setAttrElement("onclick",m).getElement()),h++}}return this._columnCheckbox(r,s,a,l),r.getElement()},t.List.prototype._buildBlock=function(e){var i=new t.Element(e),n=1;for(var s in this._settingsList[e]){if(i.addChildAfter(this._buildRows(this._settingsList[e][s],e,s)),this._maxRow==n)break;n++}return i.getElement()},t.List.prototype._blockHidden=function(){var e={_locale:this._locale,_idForm:this._idForm,_column:this._column,_maxRow:this._maxRow,_urlAddAndEdit:this._urlAddAndEdit,_dataAjaxPagination:this._dataAjaxPagination,_dataAjaxSearch:this._dataAjaxSearch,_dataAjaxRemove:this._dataAjaxRemove,_currentPage:this._currentPage,_countPages:this._countPages,_fieldRecordList:this._fieldRecordList,_hideColumnCheckbox:this._hideColumnCheckbox,_hideColumnNumber:this._hideColumnNumber};return new t.Element("div").setAttrElement("hidden",!0).addClassElement(t.CSS.formBlockHiddenClass).addChildAfter(new t.Element("div").setIdElement(d,null).setAttrElement(d,JSON.stringify(e)).getElement()).getElement()},t.List.prototype._buildPanel=function(){var e=new t.Element("div").addClassElement(t.CSS.panelClass.panel).addClassElement(t.api.existProperty(t.CSS.skinClass.panel,this._skin,t.CSS.skinClass.panel.default));e.addChildBefore(new t.Element("div").addClassElement(t.CSS.panelClass.panelHead).addChildBefore(new t.Element("h3").addClassElement(t.CSS.panelClass.panelTitle).setContentElement("title").getElement()).getElement());var i="new ui.List('"+this._fieldRecordList+"', '"+this._idList+"', '"+this._locale+"')._rebuild";return this._buildSearchForm(e),e.addChildAfter(new t.Element("div").addClassElement(t.CSS.panelClass.panelBody).addChildAfter(this._blockHidden()).addChildAfter(this._buildTable()).addChildAfter(new t.Pagination(this._dataAjaxPagination.action+"-"+this._idList).setCountPages(this._countPages).setCurrentPage(this._currentPage).setCallbackFunction(i).setSkin(this._skin).setAjax().getElement()).getElement()),e.getElement()},t.List.prototype._buildSearchForm=function(e){"block_rows"in this._settings&&(t.Form.prototype.hideBtnBack.call(this,!0),t.Form.prototype.hideBtnRemove.call(this,!0),t.Form.prototype.hideBtnSave.call(this,!0),t.Form.prototype.hideBtnClear.call(this,!0),t.Form.prototype.hideBtnReload.call(this,!0),e.addChildAfter(new t.Element("div").addClassElement(t.CSS.panelClass.panelBody).addChildAfter(this._buildForm()).getElement()))},t.List.prototype._rebuild=function(e,i){var n=document.body.querySelector("#"+this._idList+" #"+d),s=n.getAttribute(d),l=JSON.parse(s);for(var r in l)this[r]=l[r];l._currentPage=i,n.setAttribute(d,JSON.stringify(l));var a=new t.FormData(l._idForm,this._locale).getData(),o=this;(new t.Ajax).setUrl(this._dataAjaxPagination.url).addParam("search",a.data).addParam("page",l._currentPage).addParam("action",this._dataAjaxPagination.action).addCallbackFunction(function(e){console.log(e);try{var i=JSON.parse(e);o._replaceRows(i.data),new t.SortTable(null).updateSort("#"+o._idList)}catch(e){new t.Modal(null,o._locale).error(e.name+":"+e.message)}}).send()},t.List.prototype._search=function(e){var i=new t.FormData(e,this._locale).getData(),n=document.body.querySelector("#"+this._idList+" #"+d),s=n.getAttribute(d),l=JSON.parse(s);for(var r in l)this[r]=l[r];var a=this;return 0===i.error.length&&(new t.Ajax).setUrl(l._dataAjaxSearch.url).addParam("page",1).addParam("search",i.data).addParam("action",l._dataAjaxSearch.action).addCallbackFunction(function(e){console.log(e);try{var i=JSON.parse(e);l._currentPage=1,l._countPages=t.api.existProperty(i,"count_page",1),n.setAttribute(d,JSON.stringify(l)),a._replaceRows(t.api.existProperty(i,"data",i)),new t.SortTable(null).updateSort("#"+a._idList),new t.Pagination(a._dataAjaxPagination.action+"-"+a._idList)._rebuild(l._currentPage,l._countPages)}catch(e){new t.Modal(null,a._locale).error(e.name+":"+e.message)}}).send(),!0},t.List.prototype._remove=function(){var e=document.body.querySelectorAll("#"+this._idList+" input["+r+'="'+a+'"]'),i={},n=[];for(var s in e)if("object"==typeof e[s]&&e[s].checked===!0){n.push(e[s]);var o=e[s].getAttribute(l),h=e[s].getAttribute("name");t.api.buildObject(i,h,o,0)}var u=document.body.querySelector("#"+this._idList+" #"+d),m=u.getAttribute(d),c=JSON.parse(m);for(var _ in c)this[_]=c[_];var p=this;(new t.Ajax).setUrl(c._dataAjaxRemove.url).setParams(i).addParam("action",c._dataAjaxRemove.action).addParam("page",c._currentPage).addParam("max",c._maxRow).addCallbackFunction(function(e){console.log(e);try{var i=JSON.parse(e);p._replaceRows(t.api.existProperty(i,"data",i)),new t.SortTable(null).updateSort("#"+p._idList),c._currentPage=1,c._countPages=t.api.existProperty(i,"count_page",1),u.setAttribute(d,JSON.stringify(c)),new t.Pagination(p._dataAjaxPagination.action+"-"+p._idList)._rebuild(c._currentPage,c._countPages)}catch(e){new t.Modal(null,p._locale).error(e.name+":"+e.message)}}).send()},t.List.prototype._buildList=function(){var e=new t.Page("page-"+this._idList).setTitle(this._titleList,this._titleListSmall,null);return this._btnDefault(),(this._btnLeftTopList.length>0||this._btnRightTopList.length>0)&&e.setHead(this._buildRowButtons(this._btnLeftTopList,this._btnRightTopList).toHTML()),e.setBody(new t.Element("div").setIdElement(this._idList,null).addChildAfter(this._buildPanel()).toHTML()),(this._btnLeftBottomList.length>0||this._btnRightBottomList.length>0)&&e.setFooter(this._buildRowButtons(this._btnLeftBottomList,this._btnRightBottomList).toHTML()),e.getElement()},t.List.prototype._buildRowButtons=function(e,i){return new t.Element("div").addClassElement(t.CSS.newLine).addChildAfter(new t.Element("div").setWidthElement(6).addChildAfter((new t.FFButton).addButtonList(e).setPositionBlock("left").setGroup("toolbar").getElement()).getElement()).addChildAfter(new t.Element("div").setWidthElement(6).addChildAfter((new t.FFButton).addButtonList(i).setPositionBlock("right").setGroup("toolbar").getElement()).getElement())},t.List.prototype.addColumn=function(e,i){return this._column[e]=t.api.empty(i,null),this},t.List.prototype.setTitle=function(e,i){return this._titleList=t.api.empty(e,null),this._titleListSmall=t.api.empty(i,null),this},t.List.prototype.setTitleSearch=function(e,i){return t.Form.prototype.setTitle.apply(this,arguments),this},t.List.prototype.setLinkAddEndEdit=function(t){return this._urlAddAndEdit=t,this},t.List.prototype.setLinkTrash=function(t){return this._urlTrash=t,this},t.List.prototype.setDataAjaxPagination=function(t,e){return this._dataAjaxPagination.url=e,this._dataAjaxPagination.action=t,this},t.List.prototype.setDataAjaxSearch=function(t,e){return this._dataAjaxSearch.url=e,this._dataAjaxSearch.action=t,this},t.List.prototype.setDataAjaxRemove=function(t,e){return this._dataAjaxRemove.url=e,this._dataAjaxRemove.action=t,this},t.List.prototype.setSkin=function(t){return this._skin=t,this},t.List.prototype.setSkinBlockSearch=function(e){return t.Form.prototype.setSkin.apply(this,arguments),this},t.List.prototype.setTypeTable=function(e){return this._typeTable=t.api.existProperty(t.CSS.tableClass.skin,e,null),this},t.List.prototype.setUrlBack=function(t){return this._urlBack=t,this},t.List.prototype.newRowHead=function(){return this._settingsList.thead.push([]),this._lastSetting.block=i,this._lastSetting.row=Object.keys(this._settingsList.thead).length,this},t.List.prototype.newRowBody=function(){return this._settingsList.tbody.push([]),this._lastSetting.block=n,this._lastSetting.row=Object.keys(this._settingsList.tbody).length,this},t.List.prototype.addRowsBody=function(t){for(var e in t)this._settingsList.tbody.push(t[e]);return this},t.List.prototype.newRowFoot=function(){return this._settingsList.tfoot.push([]),this._lastSetting.block=s,this._lastSetting.row=Object.keys(this._settingsList.tfoot).length,this},t.List.prototype.addCellHead=function(t,e,i,n,s,l){var r=this._lastSetting.block,a=this._lastSetting.row-1;return this._settingsList[r][a].push({sort:n,width:s,style:l,content:t,rowspan:i,colspan:e}),this},t.List.prototype.addCell=function(t,e,i){var n=this._lastSetting.block,s=this._lastSetting.row-1;return this._settingsList[n][s].push({content:t,rowspan:i,colspan:e}),this},t.List.prototype.hideBtnRemove=function(e){return this._hideBtnList=t.api.empty(e,!0),this},t.List.prototype.hideBtnBack=function(e){return this._hideBtnList._btnBack=t.api.empty(e,!0),this},t.List.prototype.hideBtnSearch=function(e){return this._hideBtnList._btnSearch=t.api.empty(e,!0),this},t.List.prototype.hideBtnClear=function(e){return this._hideBtnList._btnClear=t.api.empty(e,!0),this},t.List.prototype.hideBtnAdd=function(e){return this._hideBtnList._btnAdd=t.api.empty(e,!0),this},t.List.prototype.hideBtnReload=function(e){return this._hideBtnList._btnReload=t.api.empty(e,!0),this},t.List.prototype.hideBtnRemove=function(e){return this._hideBtnList._btnRemove=t.api.empty(e,!0),this},t.List.prototype.hideBtnTrash=function(e){return this._hideBtnList._btnTrash=t.api.empty(e,!0),this},t.List.prototype.hideColumnNumber=function(e){return this._hideColumnNumber=t.api.empty(e,!0),this},t.List.prototype.hideColumnCheckbox=function(e){return this._hideColumnCheckbox=t.api.empty(e,!0),this},t.List.prototype.setCurrentPage=function(t){return this._currentPage=t,this},t.List.prototype.setCountPages=function(t){return this._countPages=t,this},t.List.prototype.getElement=function(){return this._buildList()},t.List.prototype.toHTML=function(){return this._buildList().outerHTML},t.List.prototype.appendHTML=function(e){return new t.dom(e).append(this.getElement()),this}}(window.ui||{});